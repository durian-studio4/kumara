(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{knaX:function(e,a,t){"use strict";t.r(a);t("14J3");var n=t("BMrR"),l=(t("+L6B"),t("2/Rp")),r=t("o0o1"),i=t.n(r),c=t("HaE+"),o=t("ODXe"),s=t("hGi/"),u=t("q1tI"),m=t.n(u),d=t("Hx5s"),p=t("p46w"),b=t.n(p),g=t("uzi1"),E=t.n(g),f=(t("g9YV"),t("wCAj")),v=t("VTBJ"),y=t("F6Wq"),h=t("G/yU"),x=function(e){var a=e.data,t=e.loading,r=e.error,i=e.status,c=e.cancel,s=e.handleVisibleUpdate,d=e.handleVisibleConfirm,p=Object(y["a"])(),b=Object(o["a"])(p,1),g=b[0],x=Object(u["useMemo"])((function(){return[Object(v["a"])({align:"center",title:"Tanggal",key:"tanggal",dataIndex:"tanggal"},g("tanggal")),Object(v["a"])({align:"center",title:"Nama Pembeli",key:"pembeli.name",dataIndex:"pembeli.name"},g("pembeli.name")),Object(v["a"])({align:"center",title:"No. Invoice",key:"invoice",render:function(e){return m.a.createElement("span",{className:E.a.span,id:e.id,onClick:s},e.invoice)}},g("invoice")),Object(v["a"])({align:"center",title:"Total Harga",key:"total_harga",dataIndex:"total_harga"},g("total_harga")),Object(v["a"])({align:"center",title:"Waktu Jatuh Tempo",key:"tempo",dataIndex:"tempo"},g("tempo")),Object(v["a"])({align:"center",title:"Nama Sales",key:"nama_sales",dataIndex:"nama_sales"},g("nama_sales")),{align:"center",title:"Status Pembayaran",key:"status_pembayaran",render:function(e){return m.a.createElement(m.a.Fragment,null,0===e.status_pembayaran?m.a.createElement(n["a"],{justify:"space-around"},m.a.createElement(l["a"],{className:E.a.button,id:e.id,onClick:d,type:"primary"},"Selesai"),m.a.createElement(l["a"],{className:E.a.button,onClick:function(){return c(e.id)},type:"primary",danger:!0},"Batal")):null,1===e.status_pembayaran?m.a.createElement("p",{className:E.a.p,style:{color:"#1890ff"}},"Selesai"):null,2===e.status_pembayaran?m.a.createElement("p",{className:E.a.p,style:{color:"#ff4d4f"}},"Batal"):null)}}]}),[]);return r||200!==i?m.a.createElement(h["a"],null):m.a.createElement("div",null,m.a.createElement("p",{className:E.a.title},"List Pembayaran Tempo"),m.a.createElement("div",{style:{overflow:"auto"}},m.a.createElement(f["a"],{columns:x,dataSource:a,loading:t})))},j=x,O=(t("2qtc"),t("kLXV")),k=t("Pt6z"),N=t("bIAK"),C=function(e){var a=e.idParams,t=e.visible,r=e.onCancel,i=Object(k["a"])(),c=Object(o["a"])(i,5),s=c[0],d=c[1],p=c[2],b=c[3],g=c[4];return Object(u["useEffect"])((function(){var e=setTimeout((function(){g("".concat("https://api.posarmed.id","/admin/v1/sales/").concat(a,"/piutang"))}),0);return function(){return clearTimeout(e)}}),[a]),m.a.createElement(O["a"],{visible:t,title:"Detail Invoice",closable:!1,footer:null},200!==d||b?m.a.createElement(h["a"],null):null,p?m.a.createElement(N["default"],null):m.a.createElement("div",{className:E.a.modal_body},m.a.createElement("div",{className:E.a.box10},m.a.createElement("div",{className:E.a.group,style:{padding:"0.2em"}},m.a.createElement("label",{style:{color:"#bfbeba"}},"No. Invoice"),m.a.createElement("p",null,s.invoice))),m.a.createElement("div",{className:E.a.box10},m.a.createElement("div",{className:E.a.group,style:{padding:"0.2em"}},m.a.createElement("label",{style:{color:"#bfbeba"}},"Detail Barang dan Banyaknya"),s.barang&&s.barang.map((function(e){return m.a.createElement("table",{className:E.a.table},m.a.createElement("tr",null,m.a.createElement("td",null,e.nama_barang),m.a.createElement("td",null,e.qty," ",e.satuan_barang)))})))),m.a.createElement("div",{className:E.a.box10},m.a.createElement("div",{className:E.a.group,style:{padding:"0.2em"}},m.a.createElement("label",{style:{color:"#bfbeba"}},"Total"),m.a.createElement("p",null,s.total_harga))),m.a.createElement("div",{className:E.a.box10},m.a.createElement("div",{className:E.a.group,style:{padding:"0.2em"}},m.a.createElement("label",{style:{color:"#bfbeba"}},"No. Telp"),m.a.createElement("p",null,s.pembeli&&s.pembeli.phone))),m.a.createElement("div",null,m.a.createElement("div",null,m.a.createElement("label",{color:"#bfbeba"},"Alamat"),m.a.createElement("p",null,s.pembeli&&s.pembeli.alamat))),m.a.createElement("div",{className:E.a.box10},m.a.createElement("div",{className:E.a.group,style:{padding:"0.2em"}},m.a.createElement("label",{style:{color:"#bfbeba"}},"Group"),m.a.createElement("p",null,s.pembeli&&s.pembeli.pembeli_grup))),m.a.createElement(n["a"],{justify:"space-between"},m.a.createElement(l["a"],{className:E.a.button,onClick:r,type:"primary",danger:!0},"Tutup"))))},_=C,B=(t("5NDa"),t("5rEg")),w=(t("OaEy"),t("2fM7")),S=w["a"].Option,I=[{id:1,value:"BCA"},{id:2,value:"BNI"},{id:3,value:"BRI"},{id:4,value:"Mandiri"}],T=function(e){var a=e.initial,t=e.handleChange;return m.a.createElement(w["a"],{labelInValue:!0,defaultValue:{key:a||"Mohon Pilih"},style:{width:"100%",minHeight:"2em"},onChange:t},I.map((function(e,a){return m.a.createElement(S,{key:a,id:a,value:e.value},e.value)})))},A=T,M=B["a"].TextArea,V=function(e){var a=e.visible,t=e.keterangan,r=e.onLoading,i=e.onKeteranganChange,c=e.onBankChange,o=e.onUpdate,s=e.onCancel;return m.a.createElement(O["a"],{visible:a,width:500,title:"Ubah Status",closable:!1,footer:null},m.a.createElement("div",{className:E.a.modal_body},m.a.createElement("p",{className:E.a.p,style:{textAlign:"center",fontWeight:"bold"}},"Apakah Anda Yakin Ingin Merubah Status Menjadi Selesai?"),m.a.createElement("div",{className:E.a.box10},m.a.createElement("div",{className:E.a.group},m.a.createElement("label",{htmlFor:"keterangan"},"Keterangan"),m.a.createElement(M,{className:E.a.area,id:"keterangan",value:t,onChange:i,placeholder:"Masukkan Keterangan..."}))),m.a.createElement("div",{className:E.a.box10},m.a.createElement("div",{className:E.a.group},m.a.createElement("label",{htmlFor:"bank"},"Bank"),m.a.createElement(A,{initial:"BCA",handleChange:c}))),m.a.createElement(n["a"],{justify:"space-around"},m.a.createElement(l["a"],{type:"primary",loading:r,onClick:o},"Ya"),m.a.createElement(l["a"],{type:"primary",danger:!0,onClick:function(){return s()}},"Batal"))))},P=V,U=t("ZS4f"),J=t("jC83"),L=t("h/CO"),R=[{id:1,value:"BCA"},{id:2,value:"BNI"},{id:3,value:"BRI"},{id:4,value:"Mandiri"}],D=function(e){Object(s["a"])(e);var a=Object(u["useState"])(!1),t=Object(o["a"])(a,2),r=t[0],p=t[1],g=Object(u["useState"])(!1),f=Object(o["a"])(g,2),v=f[0],y=f[1],h=Object(u["useState"])(0),x=Object(o["a"])(h,2),O=x[0],N=x[1],C=Object(u["useState"])(0),B=Object(o["a"])(C,2),w=B[0],S=B[1],I=Object(u["useState"])(["",""]),T=Object(o["a"])(I,2),A=T[0],M=T[1],V=Object(u["useState"])(!1),D=Object(o["a"])(V,2),K=D[0],q=D[1],z=Object(u["useState"])(""),F=Object(o["a"])(z,2),H=F[0],G=F[1],W=Object(U["a"])("0"),X=Object(o["a"])(W,2),Y=X[0],Z=X[1],Q=Object(J["a"])(),$=Object(o["a"])(Q,3),ee=$[0],ae=$[1],te=$[2],ne=Object(k["a"])(),le=Object(o["a"])(ne,5),re=le[0],ie=le[1],ce=le[2],oe=le[3],se=le[4];Object(u["useEffect"])((function(){var e=setTimeout((function(){se("".concat("https://api.posarmed.id","/admin/v1/sales/piutang"))}),0);return function(){return clearTimeout(e)}}),[ae]);var ue=JSON.stringify({status_pembayaran:1,keterangan:H,nama_bank:R[Y].value}),me=function(e){p(!r),N(e.target.id)},de=function(e){y(!v),S(e.target.id)},pe=function(){p(!1)},be=function(){y(!1),S(0)},ge=function(e){return G(e.target.value)},Ee=function(e,a){M([a[0]||"",a[1]||""])},fe=function(){te("".concat("https://api.posarmed.id","/admin/v1/finance/transfer/").concat(O,"/update"),ue,pe),G("")},ve=function(e){te("".concat("https://api.posarmed.id","/admin/v1/finance/transfer/").concat(e,"/update"),JSON.stringify({status_pembayaran:2}),pe)},ye=function(){var e=Object(c["a"])(i.a.mark((function e(){var a,t,n,l;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,fetch("".concat("https://api.posarmed.id","/admin/v1/finance/piutang/excel?start_date=").concat(A[0],"&end_date=").concat(A[1]),{headers:{"Content-Type":"application/json",Authorization:String(b.a.get("token"))}});case 4:return a=e.sent,e.next=7,a.blob();case 7:t=e.sent,n=t,l=document.createElement("a"),l.href=window.URL.createObjectURL(n),l.download="".concat(A[0],".xls"),document.body.appendChild(l),l.click(),document.body.removeChild(l),M(["",""]),q(!1),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](1),q(!1);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();return m.a.createElement(d["a"],null,m.a.createElement("p",{className:E.a.title},"Piutang Sales"),m.a.createElement(n["a"],{style:{marginBottom:"2em"}},m.a.createElement(L["a"],{handleChange:Ee}),m.a.createElement(l["a"],{type:"primary",className:E.a.button_convert,onClick:ye,disabled:!Boolean(A[0])&&!Boolean(A[1])},K&&"Downloading excel...",!K&&"Convert to Excel")),m.a.createElement(j,{data:re,loading:Boolean(ce),status:Number(ie),error:Boolean(oe),cancel:ve,handleVisibleUpdate:de,handleVisibleConfirm:me}),v?m.a.createElement(_,{visible:v,onCancel:be,idParams:String(w)}):null,r?m.a.createElement(P,{visible:r,keterangan:H,onLoading:Boolean(ee),onKeteranganChange:ge,onBankChange:Z,onCancel:pe,onUpdate:fe}):null)};a["default"]=D},uzi1:function(e,a,t){e.exports={title:"antd-pro-pages-sales-piutang-index-title",row_box:"antd-pro-pages-sales-piutang-index-row_box",modal_body:"antd-pro-pages-sales-piutang-index-modal_body",col:"antd-pro-pages-sales-piutang-index-col",box3:"antd-pro-pages-sales-piutang-index-box3",box5:"antd-pro-pages-sales-piutang-index-box5",box6:"antd-pro-pages-sales-piutang-index-box6",box10:"antd-pro-pages-sales-piutang-index-box10",group:"antd-pro-pages-sales-piutang-index-group",label:"antd-pro-pages-sales-piutang-index-label",input:"antd-pro-pages-sales-piutang-index-input",button:"antd-pro-pages-sales-piutang-index-button",p:"antd-pro-pages-sales-piutang-index-p",span:"antd-pro-pages-sales-piutang-index-span",area:"antd-pro-pages-sales-piutang-index-area",table:"antd-pro-pages-sales-piutang-index-table"}}}]);