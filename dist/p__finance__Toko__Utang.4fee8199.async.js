(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{CLrA:function(e,a,t){e.exports={title:"antd-pro-pages-finance-toko-utang-index-title",title_add:"antd-pro-pages-finance-toko-utang-index-title_add",row_box:"antd-pro-pages-finance-toko-utang-index-row_box",modal_body:"antd-pro-pages-finance-toko-utang-index-modal_body",col:"antd-pro-pages-finance-toko-utang-index-col",box3:"antd-pro-pages-finance-toko-utang-index-box3",box5:"antd-pro-pages-finance-toko-utang-index-box5",box10:"antd-pro-pages-finance-toko-utang-index-box10",group:"antd-pro-pages-finance-toko-utang-index-group",label:"antd-pro-pages-finance-toko-utang-index-label",input:"antd-pro-pages-finance-toko-utang-index-input",input_title:"antd-pro-pages-finance-toko-utang-index-input_title",button:"antd-pro-pages-finance-toko-utang-index-button",button_convert:"antd-pro-pages-finance-toko-utang-index-button_convert",button_title:"antd-pro-pages-finance-toko-utang-index-button_title",area:"antd-pro-pages-finance-toko-utang-index-area",p:"antd-pro-pages-finance-toko-utang-index-p"}},HcpS:function(e,a,t){"use strict";t.r(a);t("14J3");var n=t("BMrR"),l=(t("+L6B"),t("2/Rp")),c=(t("5NDa"),t("5rEg")),r=t("o0o1"),o=t.n(r),i=t("HaE+"),s=t("ODXe"),u=t("q1tI"),m=t.n(u),d=t("p46w"),b=t.n(d),g=t("CLrA"),p=t.n(g),f=(t("g9YV"),t("wCAj")),E=t("VTBJ"),v=t("F6Wq"),h=t("G/yU"),j=function(e){var a=e.data,t=e.handleVisibleUpdate,c=e.handleVisibleEdit,r=e.cancel,o=e.loading,i=e.status,d=e.error,b=Object(v["a"])(),g=Object(s["a"])(b,1),j=g[0],x=Object(u["useMemo"])((function(){return[Object(E["a"])({align:"center",title:"Tanggal",key:"tanggal",render:function(e){return m.a.createElement("span",null,e.tanggal)}},j("tanggal")),Object(E["a"])({align:"center",title:"Nama Sales",key:"nama_sales",dataIndex:"nama_sales"},j("nama_sales")),Object(E["a"])({align:"center",title:"Nama Barang",key:"nama_barang",dataIndex:"nama_barang"},j("nama_barang")),Object(E["a"])({align:"center",title:"Toko / Supplier",key:"suplier",dataIndex:"suplier"},j("suplier")),Object(E["a"])({align:"center",title:"Qty / Pcs",key:"qty",dataIndex:"qty"},j("qty")),Object(E["a"])({align:"center",title:"Satuan Barang",key:"satuan_barang",dataIndex:"satuan_barang"},j("satuan_barang")),Object(E["a"])({align:"center",title:"Harga / Satuan",qty:"harga",dataIndex:"harga"},j("harga")),Object(E["a"])({align:"center",title:"Total",key:"total",dataIndex:"total"},j("total")),{key:"id",align:"center",render:function(e){return m.a.createElement(m.a.Fragment,null,0===e.status?m.a.createElement(n["a"],{justify:"space-around"},m.a.createElement(l["a"],{className:p.a.button,id:e.id,onClick:function(){return t(e.id)},type:"primary"},"Selesai"),m.a.createElement(l["a"],{className:p.a.button,id:e.id,onClick:function(){return c(e.id)},type:"primary"},"Edit"),m.a.createElement(l["a"],{className:p.a.button,onClick:function(){return r(e.id)},type:"primary",danger:!0},"Batal")):null,1===e.status?m.a.createElement("p",{style:{color:"#1890ff"}},"Selesai"):null,2===e.status?m.a.createElement("p",{style:{color:"#ff4d4f"}},"Batal"):null)}}]}),[]);return d||200!==i?m.a.createElement(h["a"],null):m.a.createElement("div",{style:{overflow:"auto"}},m.a.createElement(f["a"],{columns:x,dataSource:a.reverse(),loading:o}),";")},x=j,y=(t("2qtc"),t("kLXV")),O=(t("jCWc"),t("kPKH")),N=t("sWYD"),k=t("LuAL"),_=t("MRut"),S=t("P5uD"),C=t("ZS4f"),T=t("CzAe"),w=t("R277"),B=function(e){var a=e.visible,t=e.onError,r=e.onCancel,o=e.onCreate,i=e.onLoadButton,d=Object(u["useState"])(""),b=Object(s["a"])(d,2),g=b[0],f=b[1],E=Object(u["useState"])(!1),v=Object(s["a"])(E,2),h=v[0],j=v[1],x=Object(w["a"])(""),B=Object(s["a"])(x,3),q=B[0],F=B[1],I=B[2],U=Object(w["a"])(""),A=Object(s["a"])(U,3),L=A[0],H=A[1],M=A[2],D=Object(T["a"])(),V=Object(T["a"])(),J=Object(C["a"])("0"),R=Object(s["a"])(J,3),K=R[0],P=R[1],Q=R[2],W=JSON.stringify({nama_sales:g,qty:q,harga:L,nama_barang:V.text,id_suplier:D.id,id_satuan_barang:K});Object(u["useEffect"])((function(){return L&&g&&V.text&&q&&K&&D.text?j(!1):j(!0)}),[L,K,D.text,V.text,g,q]),Object(u["useEffect"])((function(){Q()}),[V.text]);var z=function(e){var a=e.target.value;f(a)},Y=function(){f(""),M(),I(),V.clearText(),Q(),r()},X=function(){o({url:"".concat("http://127.0.0.1:8000","/admin/v1/finance/utang"),json:W,clear:Y})};return m.a.createElement(y["a"],{visible:a,title:"Tambah Daftar Utang",width:1e3,closable:!1,footer:null},m.a.createElement("div",{className:p.a.modal_body},m.a.createElement(O["a"],null,m.a.createElement(n["a"],null,m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"tanggal"},"Tanggal"),m.a.createElement(c["a"],{className:p.a.input,type:"text",id:"tanggal",value:Object(N["a"])(new Date,"dd/MM/yyyy"),disabled:!0}))),m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"nama_sales"},"Nama Sales"),m.a.createElement(c["a"],{className:p.a.input,type:"text",id:"nama_sales",placeholder:"Isi Nama Sales",value:g,onChange:z}))),m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"nama_barang"},"Nama Barang"),m.a.createElement(S["a"],{id:"barang",value:V.text,onChange:V.changeText,onSelect:V.selectText})))),m.a.createElement(n["a"],null,m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"toko"},"Toko / Suplier"),m.a.createElement(_["a"],{id:"toko",value:D.text,onChange:D.changeText,onSelect:D.selectText}))),m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"qty"},"Qty"),m.a.createElement(c["a"],{className:p.a.input,id:"qty",placeholder:"Isi Qty",value:q,onChange:F}))),V.text?m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"qty_satuan"},"Satuan"),m.a.createElement(k["a"],{address:"".concat("http://127.0.0.1:8000","/admin/v1/master/barang/selectgroup?nama_barang=").concat(V.text),select_id:"qty_satuan",handleChange:P}))):null),m.a.createElement(n["a"],null,m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"harga"},"Harga Satuan"),m.a.createElement(c["a"],{className:p.a.input,id:"harga",placeholder:"Isi Harga",value:L,onChange:H})))))),m.a.createElement(n["a"],{justify:"end"},t?m.a.createElement("p",{style:{color:"red"}},t):null,m.a.createElement(l["a"],{className:p.a.button,disabled:i,onClick:Y,type:"primary",danger:!0},"Batal"),m.a.createElement(l["a"],{className:p.a.button,onClick:X,disabled:h||i,type:"primary"},"Simpan")))},q=B,F=t("Pt6z");function I(e){var a=Object(u["useState"])(0),t=Object(s["a"])(a,2),n=t[0],l=t[1];Object(u["useEffect"])((function(){var a=setTimeout((function(){l(e)}),0);return function(){return clearTimeout(a)}}),[e]);var c=function(e,a){l(a.key)},r=function(e){l(e)};return[n,c,r]}var U=I;function A(e){var a=e.idSelect,t=e.textSelect,n=Object(u["useState"])(""),l=Object(s["a"])(n,2),c=l[0],r=l[1],o=Object(u["useState"])(""),i=Object(s["a"])(o,2),m=i[0],d=i[1],b=Object(u["useState"])(0),g=Object(s["a"])(b,2),p=g[0],f=g[1];Object(u["useEffect"])((function(){var e=setTimeout((function(){r(t),f(a)}),0);return function(){return clearTimeout(e)}}),[a,t]);var E=function(e){r(e)},v=function(e,a){r(a.children),f(e),d(a.children)},h=function(){r(""),d(""),f(0)};return{text:c,id:p,values:m,changeText:E,selectText:v,clearText:h}}var L=A,H=(t("T2oS"),t("W9HT")),M=(t("OaEy"),t("2fM7")),D=M["a"].Option,V=function(e){var a=e.address,t=e.initial,n=e.handleChange,l=e.disabled,c=Object(u["useState"])([]),r=Object(s["a"])(c,2),d=r[0],g=r[1],p=Object(u["useState"])(!1),f=Object(s["a"])(p,2),E=f[0],v=f[1];Object(u["useEffect"])((function(){var e=setTimeout((function(){h(a)}),0);return function(){return clearTimeout(e)}}),[a]);var h=function(){var e=Object(i["a"])(o.a.mark((function e(a){var t,n,l;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,fetch(a,{headers:{Authorization:b.a.get("token")}});case 4:return t=e.sent,e.next=7,t.json();case 7:return n=e.sent,e.next=10,n.data;case 10:l=e.sent,v(!1),g(l),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](1),console.log(e.t0.message,"error"),v(!1);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(a){return e.apply(this,arguments)}}();return E?m.a.createElement("div",null,m.a.createElement(H["a"],null)):m.a.createElement(M["a"],{labelInValue:!0,defaultValue:{key:t||"Mohon Pilih"},style:{width:"100%",minHeight:"2em"},onChange:n,disabled:l},d&&d.map((function(e,a){return m.a.createElement(D,{key:e.nama_barang,id:e.id,value:e.nama_barang},e.nama_barang)})))},J=V,R=t("bIAK"),K=function(e){var a=e.visible,t=e.onCancel,r=e.onCreate,o=e.id_edit,i=Object(F["a"])(),d=Object(s["a"])(i,5),b=d[0],g=d[1],f=d[2],E=d[3],v=d[4],j=Object(u["useState"])(""),x=Object(s["a"])(j,2),N=x[0],S=x[1],C=Object(u["useState"])(""),T=Object(s["a"])(C,2),B=T[0],q=T[1],I=Object(u["useState"])(!1),A=Object(s["a"])(I,2),H=A[0],M=A[1],D=U(b.nama_barang),V=Object(s["a"])(D,3),K=V[0],P=V[1],Q=V[2],W=U(b.id_satuan_barang),z=Object(s["a"])(W,3),Y=z[0],X=z[1],G=z[2],Z=Object(w["a"])(b.qty),$=Object(s["a"])(Z,3),ee=$[0],ae=$[1],te=$[2],ne=Object(w["a"])(b.harga&&b.harga.split("Rp").join("").split(".").join("").trim()),le=Object(s["a"])(ne,3),ce=le[0],re=le[1],oe=le[2],ie=L({idSelect:b.id_suplier,textSelect:b.nama_suplier}),se=JSON.stringify({nama_sales:N,nama_barang:K,qty:ee,harga:ce,id_suplier:ie.id,id_satuan_barang:Y});Object(u["useEffect"])((function(){var e=setTimeout((function(){v("".concat("http://127.0.0.1:8000","/admin/v1/finance/utang/").concat(o,"/select"))}),0);return function(){return clearTimeout(e)}}),[o]),Object(u["useEffect"])((function(){b&&(S(b.nama_sales),q(b.tanggal))}),[b]),Object(u["useEffect"])((function(){return ee&&ce&&N&&Y&&K&&ie.text?M(!1):M(!0)}),[ce,K,ie.text,N,ee,Y]);var ue=function(e){var a=e.target.value;S(a)},me=function(){S(""),G(0),Q(""),te(),oe(),t()},de=function(){r({url:"".concat("http://127.0.0.1:8000","/admin/v1/finance/utang/").concat(o,"/update"),json:se,clear:me})};return m.a.createElement(y["a"],{visible:a,title:"Edit Daftar Utang",width:1e3,closable:!1,footer:null},200!==g||E?m.a.createElement(h["a"],null):null,f?m.a.createElement(R["a"],null):m.a.createElement("div",{className:p.a.modal_body},m.a.createElement(O["a"],null,m.a.createElement(n["a"],null,m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"tanggal"},"Tanggal"),m.a.createElement(c["a"],{className:p.a.input,type:"text",id:"tanggal",value:B,disabled:!0}))),m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"nama_sales"},"Nama Sales"),m.a.createElement(c["a"],{className:p.a.input,type:"text",id:"nama_sales",placeholder:"Isi Nama Sales",value:N,onChange:ue}))),m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"nama_barang"},"Nama Barang"),m.a.createElement(J,{address:"".concat("http://127.0.0.1:8000","/admin/v1/master/barang/listgroup"),initial:b.nama_barang,handleChange:P})))),m.a.createElement(n["a"],null,m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"toko"},"Toko / Suplier"),m.a.createElement(_["a"],{id:"toko",value:ie.text,onChange:ie.changeText,onSelect:ie.selectText}))),m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"qty"},"Qty"),m.a.createElement(c["a"],{className:p.a.input,id:"qty",placeholder:"Isi Qty",value:ee,onChange:ae}))),K?m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"qty_satuan"},"Satuan"),m.a.createElement(k["a"],{address:"".concat("http://127.0.0.1:8000","/admin/v1/master/barang/selectgroup?nama_barang=").concat(K),initial:b.satuan_barang,handleChange:X}))):null),m.a.createElement(n["a"],null,m.a.createElement("div",{className:p.a.box3},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"harga"},"Harga Satuan"),m.a.createElement(c["a"],{className:p.a.input,id:"harga",placeholder:"Isi Harga",value:ce,onChange:re})))))),m.a.createElement(n["a"],{justify:"end"},m.a.createElement(l["a"],{className:p.a.button,disabled:Boolean(f),onClick:me,type:"primary",danger:!0},"Batal"),m.a.createElement(l["a"],{className:p.a.button,disabled:H||Boolean(f),onClick:de,type:"primary"},"Simpan")))},P=K,Q=c["a"].TextArea,W=function(e){var a=e.visible,t=e.onUpdate,c=e.onCancel,r=e.id_row,o=Object(u["useState"])(""),i=Object(s["a"])(o,2),d=i[0],b=i[1],g=function(e){b(e.target.value)},f=function(){b(""),c()},E=function(){t({url:"".concat("http://127.0.0.1:8000","/admin/v1/finance/utang/").concat(r,"/update"),json:JSON.stringify({status:1,keterangan:d}),clear:f})};return m.a.createElement(y["a"],{visible:a,title:"Ubah Status",width:450,closable:!1,footer:null},m.a.createElement("div",{className:p.a.modal_body},m.a.createElement("p",{style:{textAlign:"center",fontWeight:"bold"}},"Apakah Anda Yakin Ingin Merubah Status Menjadi Selesai?"),m.a.createElement("div",{className:p.a.box10},m.a.createElement("div",{className:p.a.group},m.a.createElement("label",{className:p.a.label,htmlFor:"keterangan"},"Keterangan:"),m.a.createElement(Q,{className:p.a.area,id:"keterangan",value:d,onChange:g,placeholder:"Masukkan Keterangan..."}))),m.a.createElement(n["a"],{justify:"space-around"},m.a.createElement(l["a"],{className:p.a.button,type:"primary",onClick:E,disabled:!d},"Ya"),m.a.createElement(l["a"],{className:p.a.button,type:"primary",danger:!0,onClick:f},"Batal"))))},z=W,Y=t("h/CO"),X=function(){var e=Object(u["useState"])(""),a=Object(s["a"])(e,2),t=a[0],r=a[1],d=Object(u["useState"])(!1),g=Object(s["a"])(d,2),f=g[0],E=g[1],v=Object(u["useState"])(!1),h=Object(s["a"])(v,2),j=h[0],y=h[1],O=Object(u["useState"])(!1),N=Object(s["a"])(O,2),k=N[0],_=N[1],S=Object(u["useState"])(0),C=Object(s["a"])(S,2),T=C[0],w=C[1],B=Object(u["useState"])(0),I=Object(s["a"])(B,2),U=I[0],A=I[1],L=Object(u["useState"])(["",""]),H=Object(s["a"])(L,2),M=H[0],D=H[1],V=Object(u["useState"])(!1),J=Object(s["a"])(V,2),R=J[0],K=J[1],Q=Object(F["a"])(),W=Object(s["a"])(Q,6),X=W[0],G=W[1],Z=W[2],$=W[3],ee=W[4],ae=W[5];Object(u["useEffect"])((function(){var e=setTimeout((function(){ee("".concat("http://127.0.0.1:8000","/admin/v1/finance/utang"))}),0);return function(){return clearTimeout(e)}}),[]);var te=Object(u["useCallback"])((function(){ee("".concat("http://127.0.0.1:8000","/admin/v1/finance/utang?filter=").concat(t)),r("")}),[ee,t]),ne=function(e){"enter"===e.key.toLowerCase()&&te()},le=function(e){r(e.target.value)},ce=function(e,a){D([a[0]||"",a[1]||""])},re=function(){return E(!f)},oe=function(e){y(!j),w(Number(e))},ie=function(e){_(!k),A(Number(e))},se=function(){_(!1),A(0)},ue=function(){y(!1),w(0)},me=function(e){var a=e.url,t=e.json,n=e.clear;ae(a,t,n)},de=function(e){var a=e.url,t=e.json,n=e.clear;ae(a,t,n)},be=function(e){var a=e.url,t=e.json,n=e.clear;ae(a,t,n)},ge=function(e){ae("".concat("http://127.0.0.1:8000","/admin/v1/finance/utang/").concat(e,"/update"),JSON.stringify({status:2}),ue)},pe=function(){var e=Object(i["a"])(o.a.mark((function e(){var a,t,n,l;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return K(!0),e.prev=1,e.next=4,fetch("".concat("http://127.0.0.1:8000","/admin/v1/finance/utang/excel/?start_date=").concat(M[0],"&end_date=").concat(M[1]),{headers:{"Content-Type":"application/json",Authorization:String(b.a.get("token"))}});case 4:return a=e.sent,e.next=7,a.blob();case 7:t=e.sent,n=t,l=document.createElement("a"),l.href=window.URL.createObjectURL(n),l.download="Utang-Toko-".concat(M[0],".xlsx"),document.body.appendChild(l),l.click(),document.body.removeChild(l),D(["",""]),K(!1),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](1),K(!1);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();return m.a.createElement("div",null,m.a.createElement("p",{className:p.a.title},"Utang Toko"),m.a.createElement("div",{className:p.a.row_box},m.a.createElement(c["a"],{className:p.a.input_title,id:"name",type:"text",placeholder:"Search Utang Toko",onChange:le,value:t,onKeyDown:ne}),m.a.createElement(l["a"],{className:p.a.button_title,type:"primary",onClick:te},"Cari")),m.a.createElement(n["a"],{justify:"space-between"},m.a.createElement("p",{className:p.a.title},"Utang Antar Toko"),m.a.createElement("p",{className:p.a.title_add,onClick:re},"+ Tambah")),m.a.createElement(n["a"],{style:{marginBottom:"1em"}},m.a.createElement(Y["a"],{handleChange:ce}),m.a.createElement(l["a"],{type:"primary",className:p.a.button_convert,onClick:pe,disabled:!Boolean(M[0])&&!Boolean(M[1])},R&&"Downloading excel...",!R&&"Convert to Excel")),m.a.createElement(x,{data:X,loading:Boolean(Z),status:Number(G),error:$,cancel:ge,handleVisibleUpdate:oe,handleVisibleEdit:ie}),m.a.createElement(q,{visible:f,onError:$,onCancel:re,onCreate:me,onLoadButton:Boolean(Z)}),k?m.a.createElement(P,{visible:k,onCreate:de,onCancel:se,id_edit:U}):null,j?m.a.createElement(z,{visible:j,onCancel:ue,onUpdate:be,id_row:T}):null)};a["default"]=X}}]);