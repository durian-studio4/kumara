(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[24],{z84e:function(e,t,a){"use strict";a.r(t);a("+L6B");var n=a("2/Rp"),r=(a("iQDF"),a("+eQT")),o=(a("5NDa"),a("5rEg")),c=a("o0o1"),i=a.n(c),l=a("HaE+"),u=a("ODXe"),s=a("q1tI"),d=a.n(s),p=a("WHYC"),f=a("9kvl"),m=a("p46w"),v=a.n(m),g=(a("g9YV"),a("wCAj")),h=a("KQm4"),y=function(e){var t=e.data,a=e.loading,n=e.onChangeData,r=Object(s["useState"])([]),c=Object(u["a"])(r,2),i=c[0],l=c[1];Object(s["useEffect"])((function(){for(var e=[],a=0;a<t.length;a++){var n=t[a];n["no"]=a,e.push(n)}l([].concat(e))}),[t]),Object(s["useEffect"])((function(){n(i)}),[i]);var p=function(e,t){i[e].qty_input=t,l(Object(h["a"])(i)),console.log("currData",i)},f=function(e,t){i[e].note=t,l(Object(h["a"])(i))},m=[{align:"center",title:"No",dataIndex:"id"},{align:"left",title:"Nama Barang",dataIndex:"product_name"},{align:"center",title:"Qty Sistem",dataIndex:"operator_name",render:function(e,t){return d.a.createElement("span",null,t.qty_system)}},{align:"center",title:"Qty Input",dataIndex:"qty_input",render:function(e,t){return d.a.createElement(o["a"],{defaultValue:e,onChange:function(e){p(t.no,e.target.value)}})}},{align:"center",title:"Difference",dataIndex:"operator_name",render:function(e,t){return d.a.createElement("span",null,i[t.no].qty_input-t.qty_system)}},{align:"center",title:"Note",dataIndex:"note",render:function(e,t){return d.a.createElement(o["a"],{defaultValue:e,onChange:function(e){f(t.no,e.target.value)}})}}];return d.a.createElement("div",{style:{overflow:"auto"}},d.a.createElement(g["a"],{columns:m,loading:a,dataSource:i}),";")},b=y,E=a("vDqi"),x=a.n(E),O=a("wd/R"),k=a.n(O),j=function(){var e,t=Object(p["l"])(),a=t.id,c=Object(s["useState"])([]),m=Object(u["a"])(c,2),g=m[0],h=m[1],y=Object(s["useState"])(!1),E=Object(u["a"])(y,2),O=E[0],j=E[1],w=Object(s["useState"])(""),S=Object(u["a"])(w,2),_=(S[0],S[1],Object(s["useState"])("")),D=Object(u["a"])(_,2),C=(D[0],D[1],Object(s["useState"])("")),I=Object(u["a"])(C,2),q=(I[0],I[1],Object(s["useState"])([])),N=Object(u["a"])(q,2),Y=N[0],A=N[1];Object(s["useEffect"])((function(){a&&Q()}),[a]);var Q=function(){var e=Object(l["a"])(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return j(!0),e.next=3,x.a.get("".concat("http://127.0.0.1:8000","/admin/v1/inventory/stock-opname/").concat(a),{headers:{Authorization:String(v.a.get("token"))}}).then((function(e){h(e.data.data)})).catch((function(e){console.log("error",e)}));case 3:j(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(){var e;return(null===g||void 0===g||null===(e=g.stock_opname_details)||void 0===e?void 0:e.length)&&!O},z=function(){var e=Object(l["a"])(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return j(!0),t={status:"pending",stock_opname_details:Y},console.log("data",t),e.next=5,x.a.post("".concat("http://127.0.0.1:8000","/admin/v1/inventory/stock-opname/").concat(a),t,{headers:{Authorization:String(v.a.get("token"))}}).then((function(e){})).catch((function(e){console.log("error",e)}));case 5:j(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(l["a"])(i.a.mark((function e(){var t;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return j(!0),t={status:"approved",stock_opname_details:Y},console.log("data",t),e.next=5,x.a.post("".concat("http://127.0.0.1:8000","/admin/v1/inventory/stock-opname/").concat(a),t,{headers:{Authorization:String(v.a.get("token"))}}).then((function(e){f["d"].push("/inventory/stok-opname")})).catch((function(e){console.log("error",e)}));case 5:j(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return d.a.createElement("div",null,d.a.createElement("div",{style:{display:"flex",margin:"0px 0px 10px 0px"}},d.a.createElement("p",{style:{fontWeight:"bold"}},"Stok Opname")),d.a.createElement("div",{style:{backgroundColor:"white",padding:"20px"}},d.a.createElement("div",{style:{textAlign:"center"}},d.a.createElement("div",{style:{fontWeight:"bold"}},"Verifikasi Stok Opname"),d.a.createElement("div",null,"Konfirmasi Stock Opname yang telah dimasukkan")),d.a.createElement("div",{style:{margin:"10px"}}),d.a.createElement("div",{style:{display:"flex",gap:"5px"}},d.a.createElement(o["a"],{style:{flex:1},disabled:!0,value:(null===g||void 0===g||null===(e=g.cabang)||void 0===e?void 0:e.nama_cabang)||""}),d.a.createElement(o["a"],{style:{flex:1},disabled:!0,value:"REFERENCE NO: ".concat(a)})),d.a.createElement("div",{style:{margin:"10px"}}),d.a.createElement("div",{style:{display:"flex",gap:"5px"}},d.a.createElement(r["a"],{style:{flex:1},disabled:!0,value:k()(null===g||void 0===g?void 0:g.date,"YYYY-MM-DD")}),d.a.createElement(o["a"],{style:{flex:1},disabled:!0,value:(null===g||void 0===g?void 0:g.note)||""}))),d.a.createElement("div",{style:{margin:"10px"}}),d.a.createElement(b,{data:(null===g||void 0===g?void 0:g.stock_opname_details)||[],loading:O,onChangeData:function(e){return A(e)}}),d.a.createElement("div",{style:{display:"flex",gap:"5px"}},d.a.createElement(n["a"],{disabled:!V(),onClick:z,style:{width:"100%"}},"Simpan Draft"),d.a.createElement(n["a"],{disabled:!V(),onClick:R,style:{width:"100%"}},"Verifikasi Stok Opname")))};t["default"]=j}}]);