(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"BVh/":function(a,e,t){a.exports={title:"antd-pro-pages-inventory-barang-stok-index-title",title_add:"antd-pro-pages-inventory-barang-stok-index-title_add",row:"antd-pro-pages-inventory-barang-stok-index-row",row_box:"antd-pro-pages-inventory-barang-stok-index-row_box",modal_body:"antd-pro-pages-inventory-barang-stok-index-modal_body",col:"antd-pro-pages-inventory-barang-stok-index-col",box3:"antd-pro-pages-inventory-barang-stok-index-box3",box5:"antd-pro-pages-inventory-barang-stok-index-box5",box6:"antd-pro-pages-inventory-barang-stok-index-box6",box10:"antd-pro-pages-inventory-barang-stok-index-box10",group:"antd-pro-pages-inventory-barang-stok-index-group",label:"antd-pro-pages-inventory-barang-stok-index-label",input:"antd-pro-pages-inventory-barang-stok-index-input",input_title:"antd-pro-pages-inventory-barang-stok-index-input_title",button:"antd-pro-pages-inventory-barang-stok-index-button",button_action:"antd-pro-pages-inventory-barang-stok-index-button_action",button_title:"antd-pro-pages-inventory-barang-stok-index-button_title",button_save:"antd-pro-pages-inventory-barang-stok-index-button_save",area:"antd-pro-pages-inventory-barang-stok-index-area",span:"antd-pro-pages-inventory-barang-stok-index-span",p:"antd-pro-pages-inventory-barang-stok-index-p",table:"antd-pro-pages-inventory-barang-stok-index-table"}},nz5K:function(a,e,t){"use strict";t.r(e);t("14J3");var n=t("BMrR"),r=(t("+L6B"),t("2/Rp")),l=(t("5NDa"),t("5rEg")),i=t("o0o1"),o=t.n(i),c=t("HaE+"),s=t("ODXe"),d=t("q1tI"),u=t.n(d),m=t("BVh/"),p=t.n(m),b=t("p46w"),g=t.n(b),y=(t("g9YV"),t("wCAj")),v=t("VTBJ"),E=t("sWYD"),x=t("F6Wq"),f=t("G/yU"),j=function(a){var e=a.data,t=a.loading,n=a.status,l=a.error,i=a.handleVisible,o=a.handleVisibleEdit,c=Object(x["a"])(),m=Object(s["a"])(c,1),b=m[0],g=Object(d["useMemo"])((function(){return[{align:"center",title:"No",dataIndex:"id"},Object(v["a"])({align:"center",title:"SKU",dataIndex:"sku"},b("sku")),Object(v["a"])({align:"center",title:"Nama Barang",dataIndex:"nama_barang"},b("nama_barang")),Object(v["a"])({align:"center",title:"Qty Display",dataIndex:"qty_display"},b("qty_display")),{align:"center",title:"Satuan Qty Display",dataIndex:"satuan_display"},Object(v["a"])({align:"center",title:"Qty Gudang",dataIndex:"qty_gudang"},b("qty_gudang")),{align:"center",title:"Satuan Qty Gudang",dataIndex:"satuan_gudang"},Object(v["a"])({align:"center",title:"Stok Minimal",dataIndex:"stok_minimum"},b("stok_minimum")),Object(v["a"])({align:"center",title:"Expired Date",dataIndex:"expired_date",render:function(a){return u.a.createElement("span",null,a?Object(E["a"])(new Date(a),"dd/MM/yyyy"):null)}},b("expired_date")),Object(v["a"])({align:"center",title:"Status",dataIndex:"expired_status"},b("expired_status")),{align:"center",title:"Foto Produk",render:function(a){var e=a.id;return u.a.createElement(r["a"],{onClick:function(){return i(e)},className:p.a.button,type:"primary"},"Lihat")}},{align:"center",render:function(a){var e=a.id;return u.a.createElement(r["a"],{onClick:function(){return o(e)},className:p.a.button,type:"primary"},"Edit")}}]}),[]);return l||200!==n?u.a.createElement(f["a"],null):u.a.createElement("div",{style:{overflow:"auto"}},u.a.createElement(y["a"],{columns:g,loading:t,dataSource:e.reverse()}),";")},_=j,O=(t("2qtc"),t("kLXV")),k=t("Pt6z"),N=t("bIAK"),h=function(a){var e=a.id_produk,t=a.visible,r=a.onCancel,l=Object(k["a"])(),i=Object(s["a"])(l,5),o=i[0],c=i[1],m=i[2],b=i[3],g=i[4];return Object(d["useEffect"])((function(){var a=setTimeout((function(){g("".concat("https://api.posarmed.id","/admin/v1/inventory/barang/").concat(e,"/select"))}),0);return function(){return clearTimeout(a)}}),[e]),u.a.createElement(O["a"],{visible:t,title:"Foto Produk",width:600,onCancel:r,closable:!1,footer:null},200!==c||b?u.a.createElement(f["a"],null):null,m?u.a.createElement(N["a"],null):u.a.createElement("div",{className:p.a.modal_body},u.a.createElement(n["a"],null,u.a.createElement("div",{className:p.a.box10},u.a.createElement("img",{alt:o.nama_barang,src:o.file_img,style:{width:"100%",height:"100%"}})))))},C=h,S=(t("jCWc"),t("kPKH")),w=t("xvlK"),q=t("tUHX"),B=function(a){var e=a.visible,t=a.onCancel,i=a.onCreate,o=(a.onError,a.onLoading),c=a.id,m=Object(k["a"])(),b=Object(s["a"])(m,5),g=b[0],y=b[1],v=b[2],E=b[3],x=b[4],j=Object(d["useState"])(""),_=Object(s["a"])(j,2),h=_[0],C=_[1],B=Object(d["useState"])(""),I=Object(s["a"])(B,2),D=I[0],Q=I[1],J=Object(d["useState"])(""),V=Object(s["a"])(J,2),F=V[0],L=V[1],T=Object(d["useState"])(""),U=Object(s["a"])(T,2),G=U[0],K=U[1],H=Object(d["useState"])(""),M=Object(s["a"])(H,2),P=M[0],R=M[1];Object(d["useEffect"])((function(){var a=setTimeout((function(){x("".concat("https://api.posarmed.id","/admin/v1/inventory/barang/").concat(c,"/select"))}),0);return function(){return clearTimeout(a)}}),[c]);var z=function(a){var e=a.target.value;C(e)};Object(d["useEffect"])((function(){L(g.harga_jual)}),[g.harga_jual]);var A=function(a){var e=a.target.value;L(e)},W=function(a){var e=a.target.value;Q(e)},X=function(){t(),C(""),Q(""),K(""),R(""),L("")},Y=function(){i("add"===P?{url:"".concat("https://api.posarmed.id","/admin/v1/inventory/barang/").concat(c,"/qty-gudang?condition=add"),json:JSON.stringify({qty_gudang:D}),clear:X}:{url:"".concat("https://api.posarmed.id","/admin/v1/inventory/barang/").concat(c,"/qty-gudang?condition=subtract"),json:JSON.stringify({qty_gudang:D}),clear:X})},Z=function(){i({url:"".concat("https://api.posarmed.id","/admin/v1/inventory/barang/").concat(c,"/update"),json:JSON.stringify({harga_jual:F}),clear:X})},$=function(){i("add"===G?{url:"".concat("https://api.posarmed.id","/admin/v1/inventory/barang/").concat(c,"/qty-display?condition=add"),json:JSON.stringify({qty_display:h}),clear:X}:{url:"".concat("https://api.posarmed.id","/admin/v1/inventory/barang/").concat(c,"/qty-display?condition=subtract"),json:JSON.stringify({qty_display:h}),clear:X})};return u.a.createElement(O["a"],{visible:e,title:"Update Qty",width:1e3,closable:!1,footer:null},200!==y||E?u.a.createElement(f["a"],null):null,v?u.a.createElement(N["a"],null):u.a.createElement("div",{className:p.a.modal_body},u.a.createElement(S["a"],null,u.a.createElement(n["a"],null,u.a.createElement("div",{className:p.a.box3},u.a.createElement("div",{className:p.a.group},u.a.createElement("label",{className:p.a.label},"Qty Gudang"),u.a.createElement(l["a"],{className:p.a.input,type:"text",value:g.qty_gudang,disabled:!0}))),u.a.createElement("div",{className:p.a.box3},u.a.createElement("div",{className:p.a.group},u.a.createElement("label",{className:p.a.label,htmlFor:"qty_gudang"},"Qty Gudang Input"),u.a.createElement(l["a"],{className:p.a.input,type:"text",id:"qty_gudang",value:D,onChange:W,placeholder:"Isi Qty Gudang"}))),u.a.createElement("div",{className:p.a.box3},u.a.createElement("div",{className:p.a.group},u.a.createElement("label",{className:p.a.label,htmlFor:"simpan_gudang"},"Update Qty Gudang"),u.a.createElement("div",{className:p.a.box10},P?u.a.createElement(r["a"],{id:"simpan_gudang",disabled:Boolean(v)||o||!D,onClick:Y,type:"primary"},"Simpan"):u.a.createElement(n["a"],null,u.a.createElement(r["a"],{className:p.a.button_action,type:"primary",onClick:function(){return R("add")}},u.a.createElement(w["a"],null)),u.a.createElement(r["a"],{className:p.a.button_action,type:"primary",danger:!0,onClick:function(){return R("subtract")}},u.a.createElement(q["a"],null))))))),u.a.createElement(n["a"],null,u.a.createElement("div",{className:p.a.box3},u.a.createElement("div",{className:p.a.group},u.a.createElement("label",{className:p.a.label},"Qty Display"),u.a.createElement(l["a"],{className:p.a.input,type:"text",value:g.qty_display,disabled:!0}))),u.a.createElement("div",{className:p.a.box3},u.a.createElement("div",{className:p.a.group},u.a.createElement("label",{className:p.a.label,htmlFor:"qty_display"},"Qty Display Input"),u.a.createElement(l["a"],{className:p.a.input,type:"text",id:"qty_display",value:h,onChange:z,placeholder:"Isi Qty Display"}))),u.a.createElement("div",{className:p.a.box3},u.a.createElement("div",{className:p.a.group},u.a.createElement("label",{className:p.a.label,htmlFor:"simpan_display"},"Update Qty Display"),u.a.createElement("div",{className:p.a.box10},G?u.a.createElement(r["a"],{id:"simpan_display",disabled:Boolean(v)||o||!h,onClick:$,type:"primary"},"Simpan"):u.a.createElement(n["a"],null,u.a.createElement(r["a"],{className:p.a.button_action,type:"primary",onClick:function(){return K("add")}},u.a.createElement(w["a"],null)),u.a.createElement(r["a"],{className:p.a.button_action,type:"primary",danger:!0,onClick:function(){return K("subtract")}},u.a.createElement(q["a"],null))))))),u.a.createElement(n["a"],null,u.a.createElement("div",{className:p.a.box3},u.a.createElement("div",{className:p.a.group},u.a.createElement("label",{className:p.a.label,htmlFor:"qty_gudang"},"Harga Jual"),u.a.createElement(l["a"],{className:p.a.input,type:"text",id:"harga_jual",value:F,onChange:A,placeholder:"Harga Jual"}),u.a.createElement(r["a"],{id:"simpan_gudang",disabled:Boolean(v)||o,onClick:Z,type:"primary"},"Simpan")))))),u.a.createElement(n["a"],{justify:"end"},u.a.createElement(r["a"],{className:p.a.button,disabled:Boolean(v)||o,onClick:X,type:"primary",danger:!0},"Batal")))},I=B,D=t("jC83"),Q=t("h/CO"),J=function(){var a=Object(d["useState"])(""),e=Object(s["a"])(a,2),t=e[0],i=e[1],m=Object(d["useState"])(0),b=Object(s["a"])(m,2),y=b[0],v=b[1],E=Object(d["useState"])(!1),x=Object(s["a"])(E,2),f=x[0],j=x[1],O=Object(d["useState"])(0),N=Object(s["a"])(O,2),h=N[0],S=N[1],w=Object(d["useState"])(!1),q=Object(s["a"])(w,2),B=q[0],J=q[1],V=Object(d["useState"])(["",""]),F=Object(s["a"])(V,2),L=F[0],T=F[1],U=Object(d["useState"])(!1),G=Object(s["a"])(U,2),K=G[0],H=G[1],M=Object(k["a"])(),P=Object(s["a"])(M,5),R=P[0],z=P[1],A=P[2],W=P[3],X=P[4],Y=Object(D["a"])(),Z=Object(s["a"])(Y,3),$=Z[0],aa=Z[1],ea=Z[2];Object(d["useEffect"])((function(){var a=setTimeout((function(){X("".concat("https://api.posarmed.id","/admin/v1/inventory/barang/list"))}),0);return function(){return clearTimeout(a)}}),[aa]);var ta=Object(d["useCallback"])((function(){X("".concat("https://api.posarmed.id","/admin/v1/inventory/barang/list?filter=").concat(t)),i("")}),[X,t]),na=function(a){"enter"===a.key.toLowerCase()&&ta()},ra=function(a,e){T([e[0]||"",e[1]||""])},la=function(a){v(Number(a)),j(!f)},ia=function(a){S(Number(a)),J(!B)},oa=function(a){i(a.target.value)},ca=function(){v(0),j(!1)},sa=function(){S(0),J(!1)},da=function(a){var e=a.url,t=a.json,n=a.clear;ea(e,t,n)},ua=function(){var a=Object(c["a"])(o.a.mark((function a(){var e,t,n,r;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return H(!0),a.prev=1,a.next=4,fetch("".concat("https://api.posarmed.id","/admin/v1/inventory/stock-opname?start_date=").concat(L[0],"&end_date=").concat(L[1]),{headers:{"Content-Type":"application/json",Authorization:String(g.a.get("token"))}});case 4:return e=a.sent,a.next=7,e.blob();case 7:t=a.sent,n=t,r=document.createElement("a"),r.href=window.URL.createObjectURL(n),r.download="Stock Opname ".concat(L[0],"-").concat(L[1],".xlsx"),document.body.appendChild(r),r.click(),document.body.removeChild(r),T(["",""]),H(!1),a.next=22;break;case 19:a.prev=19,a.t0=a["catch"](1),H(!1);case 22:case"end":return a.stop()}}),a,null,[[1,19]])})));return function(){return a.apply(this,arguments)}}();return u.a.createElement("div",null,u.a.createElement("p",{className:p.a.title},"Stok Barang"),u.a.createElement("div",{className:p.a.row_box},u.a.createElement(l["a"],{className:p.a.input_title,id:"name",type:"text",placeholder:"Search Barang",onChange:oa,value:t,onKeyDown:na}),u.a.createElement(r["a"],{className:p.a.button_title,type:"primary",onClick:ta},"Cari")),u.a.createElement(n["a"],{style:{marginBottom:"2em"}},u.a.createElement(Q["a"],{handleChange:ra}),u.a.createElement(r["a"],{type:"primary",className:p.a.button_convert,onClick:ua,disabled:!Boolean(L[0])&&!Boolean(L[1])},K&&"Downloading excel...",!K&&"Convert to Excel")),u.a.createElement(n["a"],{justify:"space-between"},u.a.createElement("p",{className:p.a.title},"Expired Date")),u.a.createElement(_,{data:R,loading:Boolean(A),status:Number(z),error:W,handleVisible:la,handleVisibleEdit:ia}),B?u.a.createElement(I,{visible:B,id:h,onCancel:sa,onCreate:da,onLoading:Boolean($),onError:aa}):null,f?u.a.createElement(C,{visible:f,id_produk:String(y),onCancel:ca}):null)};e["default"]=J}}]);