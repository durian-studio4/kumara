(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"0RIx":function(e,a,t){e.exports={title:"antd-pro-pages-inventory-order-confirm-index-title",title_add:"antd-pro-pages-inventory-order-confirm-index-title_add",row_box:"antd-pro-pages-inventory-order-confirm-index-row_box",modal_body:"antd-pro-pages-inventory-order-confirm-index-modal_body",col:"antd-pro-pages-inventory-order-confirm-index-col",box3:"antd-pro-pages-inventory-order-confirm-index-box3",box5:"antd-pro-pages-inventory-order-confirm-index-box5",box10:"antd-pro-pages-inventory-order-confirm-index-box10",group:"antd-pro-pages-inventory-order-confirm-index-group",label:"antd-pro-pages-inventory-order-confirm-index-label",input:"antd-pro-pages-inventory-order-confirm-index-input",input_search:"antd-pro-pages-inventory-order-confirm-index-input_search",button:"antd-pro-pages-inventory-order-confirm-index-button",button_search:"antd-pro-pages-inventory-order-confirm-index-button_search",area:"antd-pro-pages-inventory-order-confirm-index-area",p:"antd-pro-pages-inventory-order-confirm-index-p",span:"antd-pro-pages-inventory-order-confirm-index-span",number:"antd-pro-pages-inventory-order-confirm-index-number"}},Lh6X:function(e,a,t){"use strict";t.r(a);t("14J3");var n=t("BMrR"),r=(t("+L6B"),t("2/Rp")),i=(t("5NDa"),t("5rEg")),o=t("ODXe"),c=(t("miYZ"),t("tsqr")),l=t("q1tI"),d=t.n(l),s=t("0RIx"),u=t.n(s),m=(t("g9YV"),t("wCAj")),p=(t("P2fV"),t("NJEC")),b=(t("sRBo"),t("kaz8")),f=t("VTBJ"),g=t("F6Wq"),v=t("G/yU"),y=function(e){var a=e.data,t=e.status,n=e.loading,i=e.error,c=e.onPenerima,s=e.handleVisibleUpdate,y=Object(g["a"])(),O=Object(o["a"])(y,1),_=O[0],x=[];for(var j in a)x.push({id_order:a[j].order_group,id:Number(j)+1,nama_suplier:a[j].nama_supplier,tanggal:a[j].tanggal,total:a[j].total.toLocaleString(),confirm_sales:a[j].confirm_sales});var E=Object(l["useMemo"])((function(){return[{align:"center",title:"Id",dataIndex:"id",sorter:function(e,a){return e.id-a.id}},Object(f["a"])({align:"center",title:"Tanggal",dataIndex:"tanggal"},_("tanggal")),Object(f["a"])({align:"center",title:"Nama Suplier",dataIndex:"nama_suplier"},_("nama_suplier")),Object(f["a"])({align:"center",title:"Total",dataIndex:"total"},_("total")),{align:"center",title:"Detail Barang",render:function(e){var a=e.id_order,t=e.confirm_sales;return d.a.createElement(r["a"],{type:"primary",className:u.a.button,onClick:function(){return s(a,t)}},"Detail")}},{align:"center",title:"Penerima",render:function(e){return d.a.createElement(p["a"],{title:"Apakah Anda Ingin Confirm?",onConfirm:function(){c(e.id_order)},okText:"Yes",cancelText:"No",disabled:e.confirm_sales},d.a.createElement(b["a"],{checked:e.confirm_sales,disabled:e.confirm_sales}))}}]}),[]);return i||200!==t?d.a.createElement(v["a"],null):d.a.createElement("div",{style:{overflow:"auto"}},d.a.createElement(m["a"],{columns:E,loading:n,dataSource:x.reverse()}),";")},O=y,_=(t("2qtc"),t("kLXV")),x=t("Pt6z"),j=t("jC83"),E=(t("iQDF"),t("+eQT")),h=t("aZ9c"),C=t("wd/R"),N=t.n(C),S=t("sWYD"),T=t("LuAL"),k=t("MRut");function w(e){var a=e.idSelect,t=e.textSelect,n=Object(l["useState"])(""),r=Object(o["a"])(n,2),i=r[0],c=r[1],d=Object(l["useState"])(""),s=Object(o["a"])(d,2),u=(s[0],s[1]),m=Object(l["useState"])(0),p=Object(o["a"])(m,2),b=p[0],f=p[1];Object(l["useEffect"])((function(){var e=setTimeout((function(){c(t),f(a)}),0);return function(){return clearTimeout(e)}}),[a,t]);var g=function(e){c(e)},v=function(e,a){c(e),f(e),u()},y=function(){c("")};return{text:i,id:b,changeText:g,selectText:v,clearText:y}}var B=w,q=t("ZS4f");function I(e){var a=Object(l["useState"])(),t=Object(o["a"])(a,2),n=t[0],r=t[1];Object(l["useEffect"])((function(){var a=setTimeout((function(){r(e)}),0);return function(){return clearTimeout(a)}}),[e]);var i=function(e){r(e.value)},c=function(){r(e)};return[n,i,c]}var L=Object(S["a"])(new Date,"dd-MM-yyyy"),D=function(e){return 0===Object.keys(e).length},R=function(e){var a=e.visible,t=e.onCreate,i=e.onCancel,c=e.onLoading,s=e.data,m=e.barang_confirm,p=e.id_confirm,b=e.key_confirm,f=s.detail&&s.detail[b],g=Object(l["useState"])(L),v=Object(o["a"])(g,2),y=v[0],O=v[1],x=I(f.harga.split("Rp").join("").split(".").join("").trim()),j=Object(o["a"])(x,3),C=j[0],S=j[1],w=j[2],R=I(f.qty_confirm),J=Object(o["a"])(R,3),M=J[0],V=J[1],Y=J[2],F=B({idSelect:f.id_suplier,textSelect:f.nama_suplier}),A=Object(q["a"])(f.id_satuan_barang),P=Object(o["a"])(A,2),Q=P[0],U=P[1],G=Object(l["useState"])(!1),X=Object(o["a"])(G,2),Z=X[0],z=X[1],K={id_satuan_barang:Q,harga:C,qty_confirm:M,id_suplier:F.id,expired_date:y};Object(l["useEffect"])((function(){if(f){var e=f.expired_date?f.expired_date:L;O(e)}}),[f]),Object(l["useEffect"])((function(){return D(K)?z(!0):z(!1)}),[K]);var W=function(e,a){O(a)},H=function(){Y(),w(),O(L),F.clearText(),i()},$=function(){t({url:"".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(p,"/update"),json:JSON.stringify(K),clear:H})};return d.a.createElement(_["a"],{visible:a,title:"Update Order",onCancel:i,width:500,footer:null},d.a.createElement("div",{className:u.a.modal_body},d.a.createElement("div",{className:u.a.box10},d.a.createElement("div",{className:u.a.group},d.a.createElement("label",{className:u.a.label,htmlFor:"qty"},"Qty"),d.a.createElement(h["a"],{className:u.a.number,thousandSeparator:!0,thousandsGroupStyle:"thousand",onValueChange:V,value:String(M)}))),d.a.createElement("div",{className:u.a.box10},d.a.createElement("div",{className:u.a.group},d.a.createElement("label",{className:u.a.label,htmlFor:"total"},"Harga"),d.a.createElement(h["a"],{className:u.a.number,thousandSeparator:!0,thousandsGroupStyle:"thousand",onValueChange:S,value:String(C)}))),d.a.createElement("div",{className:u.a.box10},d.a.createElement("div",{className:u.a.group},d.a.createElement("label",{className:u.a.label,htmlFor:"satuan"},"Satuan Barang"),d.a.createElement(T["a"],{address:"".concat("https://api.posarmed.id","/admin/v1/master/barang/selectgroup?nama_barang=").concat(m),initial:f.satuan_barang,handleChange:U}))),d.a.createElement("div",{className:u.a.box10},d.a.createElement("div",{className:u.a.group},d.a.createElement("label",{className:u.a.label,htmlFor:"id_suplier"},"Suplier"),d.a.createElement(k["a"],{id:"id_suplier",value:F.text,onChange:F.changeText,onSelect:F.selectText}))),d.a.createElement("div",{className:u.a.box10},d.a.createElement("div",{className:u.a.group},d.a.createElement("label",{className:u.a.label},"Expired"),d.a.createElement(E["a"],{style:{width:"100%"},onChange:W,value:N()(y,"DD-MM-YYYY")})))),d.a.createElement(n["a"],{justify:"space-between"},d.a.createElement(r["a"],{onClick:i,disabled:c,type:"primary",danger:!0},"Batal"),d.a.createElement(r["a"],{onClick:$,type:"primary",disabled:Z||c},c&&"Updating...",!c&&"Tambah")))},J=R,M=function(e){var a=e.visible,t=e.id_update,i=e.onCancel,c=e.isConfirm,s=e.onLoadButton,p=e.onConfirmOrder,b=e.onBatalOrder,f=Object(x["a"])(),g=Object(o["a"])(f,5),y=g[0],O=g[1],E=g[2],h=g[3],C=g[4],N=Object(j["a"])(),S=Object(o["a"])(N,3),T=S[0],k=S[1],w=S[2],B=Object(l["useState"])(!1),q=Object(o["a"])(B,2),I=q[0],L=q[1],D=Object(l["useState"])(""),R=Object(o["a"])(D,2),M=R[0],V=R[1],Y=Object(l["useState"])(""),F=Object(o["a"])(Y,2),A=F[0],P=F[1],Q=Object(l["useState"])(""),U=Object(o["a"])(Q,2),G=U[0],X=U[1];Object(l["useEffect"])((function(){var e=setTimeout((function(){C("".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(t,"/select"))}),0);return function(){return clearTimeout(e)}}),[t,k]);var Z=function(e,a,t){V(e),P(a),X(t),L(!0)},z=function(){L(!1),V(""),P(""),X("")},K=function(e){var a=e.url,t=e.json,n=e.clear;w(a,t,n)},W=[];for(var H in y.detail)W.push({key:H,id:y.detail[H].id,nama_barang:y.detail[H].nama_barang,expired_date:y.detail[H].expired_date,qty_confirm:y.detail[H].qty_confirm,qty_req:y.detail[H].qty_req,total:y.detail[H].total.toLocaleString()});var $=Object(l["useMemo"])((function(){return[{align:"center",title:"Nama Barang",dataIndex:"nama_barang"},{align:"center",title:"Qty Req",dataIndex:"qty_req"},{align:"center",title:"Qty Conf",render:function(e){return d.a.createElement("span",{className:u.a.span,onClick:function(){return Z(e.id,e.key,e.nama_barang)}},e.qty_confirm)}},{align:"center",title:"Expired Date",dataIndex:"expired_date"},{align:"center",title:"Total",dataIndex:"total"}]}),[]);return d.a.createElement(_["a"],{visible:a,title:"Confirm Order",onCancel:i,footer:null,width:800},d.a.createElement("div",{className:u.a.modal_body},200!==O||h?d.a.createElement(v["a"],null):null,y?d.a.createElement(l["Fragment"],null,d.a.createElement(m["a"],{columns:$,loading:Boolean(E),rowKey:"id",dataSource:W}),d.a.createElement("div",{style:{textAlign:"center"}},d.a.createElement("p",{className:u.a.p},"Total"),d.a.createElement("p",{className:u.a.p},y.total))):null),c?null:d.a.createElement(n["a"],{justify:"end"},d.a.createElement(r["a"],{className:u.a.button,disabled:s,onClick:b,type:"primary",danger:!0},"Batal Order"),d.a.createElement(r["a"],{className:u.a.button,disabled:s,onClick:function(){return p(t)},type:"primary"},"Confirm Order")),I?d.a.createElement(J,{data:y,visible:I,id_confirm:M,key_confirm:A,barang_confirm:G,onCreate:K,onCancel:z,onLoading:Boolean(T)}):null)},V=M;c["b"].config({top:100,duration:1,maxCount:1});var Y=function(){var e=Object(l["useState"])(""),a=Object(o["a"])(e,2),t=a[0],s=a[1],m=Object(l["useState"])(""),p=Object(o["a"])(m,2),b=p[0],f=p[1],g=Object(l["useState"])(!1),v=Object(o["a"])(g,2),y=v[0],_=v[1],E=Object(l["useState"])(!1),h=Object(o["a"])(E,2),C=h[0],N=h[1],S=Object(x["a"])(),T=Object(o["a"])(S,5),k=T[0],w=T[1],B=T[2],q=T[3],I=T[4],L=Object(j["a"])(),D=Object(o["a"])(L,3),R=D[0],J=D[1],M=D[2];Object(l["useEffect"])((function(){var e=setTimeout((function(){I("".concat("https://api.posarmed.id","/admin/v1/inventory/order/list"))}),0);return function(){return clearTimeout(e)}}),[J]);var Y=Object(l["useCallback"])((function(){I("".concat("https://api.posarmed.id","/admin/v1/inventory/order/list?filter=").concat(t))}),[I,t]),F=function(e){"enter"===e.key.toLowerCase()&&Y()},A=function(e){s(e.target.value)},P=function(e,a){f(e),_(!y),N(a)},Q=function(){f(""),N(!1),_(!y)},U=function(e){M("".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(e,"/konfirmasi"),JSON.stringify({confirm_sales:1}),X),_(!1)},G=function(){M("".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(b,"/batal"),JSON.stringify({confirm_sales:0}),Q)},X=function(){200===w?c["b"].success("Confirm Success"):c["b"].error("Confirm Batal")};return d.a.createElement("div",null,d.a.createElement("p",{className:u.a.title},"Confirm Order"),d.a.createElement("div",{className:u.a.row_box},d.a.createElement(i["a"],{className:u.a.input_search,id:"name",type:"text",placeholder:"Search Barang",onChange:A,value:t,onKeyDown:F}),d.a.createElement(r["a"],{className:u.a.button_search,type:"primary",onClick:Y},"Cari")),d.a.createElement(n["a"],{justify:"end"},d.a.createElement("p",{className:u.a.title_add},"Approve")),d.a.createElement(O,{data:k,status:Number(w),loading:Boolean(B),error:q,onPenerima:U,handleVisibleUpdate:P}),y?d.a.createElement(V,{visible:y,id_update:b,isConfirm:C,onLoadButton:Boolean(R),onConfirmOrder:U,onBatalOrder:G,onCancel:Q}):null)};a["default"]=Y}}]);