(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{GBMO:function(e,a,t){"use strict";t.r(a);t("+L6B");var n=t("2/Rp"),r=(t("5NDa"),t("5rEg")),i=t("ODXe"),l=t("q1tI"),c=t.n(l),o=t("IZNH"),d=t.n(o),s=(t("g9YV"),t("wCAj")),u=(t("14J3"),t("BMrR")),m=(t("sRBo"),t("kaz8")),p=t("VTBJ"),b=t("F6Wq"),f=t("G/yU"),g=function(e){var a=e.data,t=e.status,r=e.loading,o=e.error,g=e.handleVisibleUpdate,v=Object(b["a"])(),_=Object(i["a"])(v,1),j=_[0],O=[];for(var E in a)O.push({id_order:a[E].order_group,id:Number(E)+1,tanggal:a[E].tanggal,nama_suplier:a[E].nama_supplier,total:a[E].total,confirm_sales:a[E].confirm_sales,confirm_finance:a[E].confirm_finance});var x=Object(l["useMemo"])((function(){return[{align:"center",title:"No",dataIndex:"id",sorter:function(e,a){return e.id-a.id}},Object(p["a"])({align:"center",title:"Tanggal",dataIndex:"tanggal"},j("tanggal")),Object(p["a"])({align:"center",title:"Nama Suplier",dataIndex:"nama_suplier"},j("nama_suplier")),Object(p["a"])({align:"center",title:"Total",dataIndex:"total",render:function(e){return c.a.createElement("p",null,e?Number(e).toLocaleString():null)}},j("total")),{align:"center",title:"Detail Barang",render:function(e){var a=e.id_order,t=e.confirm_finance;return c.a.createElement(n["a"],{type:"primary",onClick:function(){return g(a,t)}},"Detail")}},{align:"center",title:"Penerima",render:function(e){return c.a.createElement("span",null,c.a.createElement(m["a"],{checked:e.confirm_sales,disabled:!0}))}},{align:"center",title:"Finance",render:function(e){return c.a.createElement(m["a"],{checked:e.confirm_finance,disabled:!0})}}]}),[]);return o||200!==t?c.a.createElement(f["a"],null):c.a.createElement("div",null,c.a.createElement(u["a"],{justify:"space-between"},c.a.createElement("p",{className:d.a.title},"Suplier"),c.a.createElement("p",{className:d.a.title_add},"Approve")),c.a.createElement("div",{style:{overflow:"auto"}},c.a.createElement(s["a"],{columns:x,dataSource:O.reverse(),loading:r})))},v=g,_=(t("2qtc"),t("kLXV")),j=t("Pt6z"),O=t("jC83"),E=(t("iQDF"),t("+eQT")),x=t("wd/R"),y=t.n(x),h=t("sWYD"),N=t("aZ9c"),S=t("LuAL"),C=t("MRut");function w(e){var a=e.idSelect,t=e.textSelect,n=Object(l["useState"])(""),r=Object(i["a"])(n,2),c=r[0],o=r[1],d=Object(l["useState"])(""),s=Object(i["a"])(d,2),u=(s[0],s[1]),m=Object(l["useState"])(0),p=Object(i["a"])(m,2),b=p[0],f=p[1];Object(l["useEffect"])((function(){var e=setTimeout((function(){o(t),f(a)}),0);return function(){return clearTimeout(e)}}),[a,t]);var g=function(e){o(e)},v=function(e,a){o(e),f(e),u()},_=function(){o("")};return{text:c,id:b,changeText:g,selectText:v,clearText:_}}var k=w,T=t("ZS4f"),q=t("Yyf6"),B=Object(h["a"])(new Date,"dd-MM-yyyy"),D=function(e){return 0===Object.keys(e).length},I=function(e){var a=e.visible,t=e.onCreate,r=e.onCancel,o=e.onLoading,s=e.data,m=e.barang_confirm,p=e.key_confirm,b=e.id_confirm,f=s.detail&&s.detail[p],g=Object(l["useState"])(B),v=Object(i["a"])(g,2),j=v[0],O=v[1],x=Object(q["a"])(f.harga.split("Rp").join("").split(".").join("").trim()),h=Object(i["a"])(x,3),w=h[0],I=h[1],L=h[2],F=Object(q["a"])(f.qty_confirm),M=Object(i["a"])(F,3),J=M[0],R=M[1],V=M[2],Y=k({idSelect:f.id_suplier,textSelect:f.nama_suplier}),Q=Object(T["a"])(f.id_satuan_barang),U=Object(i["a"])(Q,2),A=U[0],G=U[1],Z=Object(l["useState"])(!1),H=Object(i["a"])(Z,2),z=H[0],P=H[1],W={id_satuan_barang:A,harga:w,qty_confirm:J,id_suplier:Y.id,expired_date:j};Object(l["useEffect"])((function(){if(f){var e=f.expired_date?f.expired_date:B;O(e)}}),[f]),Object(l["useEffect"])((function(){return D(W)?P(!0):P(!1)}),[W]);var X=function(e,a){O(a)},K=function(){L(),V(),O(B),Y.clearText(),r()},$=function(){t({url:"".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(b,"/update"),json:JSON.stringify(W),clear:K})};return c.a.createElement(_["a"],{visible:a,title:"Update Order",onCancel:r,width:500,footer:null},c.a.createElement("div",{className:d.a.modal_body},c.a.createElement("div",{className:d.a.box10},c.a.createElement("div",{className:d.a.group},c.a.createElement("label",{className:d.a.label,htmlFor:"qty"},"Qty"),c.a.createElement(N["a"],{className:d.a.number,thousandSeparator:!0,thousandsGroupStyle:"thousand",onValueChange:R,value:String(J)}))),c.a.createElement("div",{className:d.a.box10},c.a.createElement("div",{className:d.a.group},c.a.createElement("label",{className:d.a.label,htmlFor:"total"},"Harga"),c.a.createElement(N["a"],{className:d.a.number,thousandSeparator:!0,thousandsGroupStyle:"thousand",onValueChange:I,value:String(w)}))),c.a.createElement("div",{className:d.a.box10},c.a.createElement("div",{className:d.a.group},c.a.createElement("label",{className:d.a.label,htmlFor:"satuan"},"Satuan Barang"),c.a.createElement(S["a"],{address:"".concat("https://api.posarmed.id","/admin/v1/master/barang/selectgroup?nama_barang=").concat(m),initial:f.satuan_barang,handleChange:G}))),c.a.createElement("div",{className:d.a.box10},c.a.createElement("div",{className:d.a.group},c.a.createElement("label",{className:d.a.label,htmlFor:"id_suplier"},"Suplier"),c.a.createElement(C["a"],{id:"id_suplier",value:Y.text,onChange:Y.changeText,onSelect:Y.selectText}))),c.a.createElement("div",{className:d.a.box10},c.a.createElement("div",{className:d.a.group},c.a.createElement("label",{className:d.a.label},"Expired"),c.a.createElement(E["a"],{style:{width:"100%"},onChange:X,value:y()(j,"DD-MM-YYYY")})))),c.a.createElement(u["a"],{justify:"space-between"},c.a.createElement(n["a"],{onClick:r,disabled:o,type:"primary",danger:!0},"Batal"),c.a.createElement(n["a"],{onClick:$,type:"primary",disabled:z||o},o&&"Updating...",!o&&"Tambah")))},L=I,F=function(e){var a=e.visible,t=e.id_order,r=e.isConfirm,o=e.onCancelOrder,u=e.onLoadButton,m=e.onConfirmOrder,p=e.onCancel,b=Object(j["a"])(),f=Object(i["a"])(b,5),g=f[0],v=f[1],E=f[2],x=f[3],y=f[4],h=Object(O["a"])(),N=Object(i["a"])(h,3),S=N[0],C=N[1],w=N[2],k=Object(l["useState"])(!1),T=Object(i["a"])(k,2),q=T[0],B=T[1],D=Object(l["useState"])(""),I=Object(i["a"])(D,2),F=I[0],M=I[1],J=Object(l["useState"])(""),R=Object(i["a"])(J,2),V=R[0],Y=R[1],Q=Object(l["useState"])(""),U=Object(i["a"])(Q,2),A=U[0],G=U[1];Object(l["useEffect"])((function(){var e=setTimeout((function(){y("".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(t,"/select"))}),0);return function(){return clearTimeout(e)}}),[t,C]);var Z=function(e,a,t){M(e),Y(a),G(t),B(!0)},H=function(){B(!1),M(""),Y(""),G("")},z=function(e){var a=e.url,t=e.json,n=e.clear;w(a,t,n)},P=function(){m({url:"".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(t,"/konfirmasi-finance"),json:JSON.stringify({confirm_finance:!0}),clear:p})},W=function(){o({url:"".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(t,"/batal"),json:JSON.stringify({}),clear:p})},X=[];for(var K in g.detail)X.push({key:K,id:g.detail[K].id,nama_barang:g.detail[K].nama_barang,expired_date:g.detail[K].expired_date,qty_confirm:g.detail[K].qty_confirm,qty_req:g.detail[K].qty_req,total:g.detail[K].total.toLocaleString()});var $=Object(l["useMemo"])((function(){return[{align:"center",title:"Qty Req",dataIndex:"qty_req"},{align:"center",title:"Qty Conf",render:function(e){return c.a.createElement("span",{className:d.a.span,onClick:function(){return Z(e.id,e.key,e.nama_barang)}},e.qty_confirm)}},{align:"center",title:"Nama Barang",dataIndex:"nama_barang"},{align:"center",title:"Expired Date",dataIndex:"expired_date"},{align:"center",title:"Total",dataIndex:"total"}]}),[]);return c.a.createElement(_["a"],{visible:a,title:"Detail Suplier",onCancel:p,footer:null,width:600},c.a.createElement("div",{className:d.a.modal_body},200!==v||x?c.a.createElement("h1",null,"Something went wrong"):null,g?c.a.createElement(l["Fragment"],null,c.a.createElement(s["a"],{columns:$,loading:Boolean(E),dataSource:X}),c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("p",{className:d.a.p},"Total"),c.a.createElement("p",{className:d.a.p},g.total))):null),r?null:c.a.createElement(c.a.Fragment,null,c.a.createElement(n["a"],{style:{width:"100%"},className:d.a.button,type:"primary",danger:!0,id:"cancel",disabled:u,onClick:W},"Cancel Order"),c.a.createElement(n["a"],{style:{width:"100%"},className:d.a.button,type:"primary",id:"confirm",disabled:u,onClick:P},"Confirm Order")),q?c.a.createElement(L,{data:g,visible:q,id_confirm:F,key_confirm:V,barang_confirm:A,onCreate:z,onCancel:H,onLoading:Boolean(S)}):null)},M=F,J=function(){var e=Object(l["useState"])(""),a=Object(i["a"])(e,2),t=a[0],o=a[1],s=Object(l["useState"])(!1),u=Object(i["a"])(s,2),m=u[0],p=u[1],b=Object(l["useState"])(""),f=Object(i["a"])(b,2),g=f[0],_=f[1],E=Object(l["useState"])(!1),x=Object(i["a"])(E,2),y=x[0],h=x[1],N=Object(j["a"])(),S=Object(i["a"])(N,5),C=S[0],w=S[1],k=S[2],T=S[3],q=S[4],B=Object(O["a"])(),D=Object(i["a"])(B,3),I=D[0],L=D[1],F=D[2];Object(l["useEffect"])((function(){var e=setTimeout((function(){q("".concat("https://api.posarmed.id","/admin/v1/inventory/order/list"))}),0);return function(){return clearTimeout(e)}}),[L]);var J=Object(l["useCallback"])((function(){q("".concat("https://api.posarmed.id","/admin/v1/inventory/order/list?filter=").concat(t)),o("")}),[q,t]),R=function(e,a){_(e),p(!m),h(a)},V=function(e){"enter"===e.key.toLowerCase()&&J()},Y=function(){_(""),h(!1),p(!1)},Q=function(e){o(e.target.value)},U=function(e){var a=e.url,t=e.json,n=e.clear;F(a,t,n)},A=function(e){var a=e.url,t=e.json,n=e.clear;F(a,t,n)};return c.a.createElement("div",null,c.a.createElement("p",{className:d.a.title},"Suplier"),c.a.createElement("div",{className:d.a.row_box},c.a.createElement(r["a"],{className:d.a.input_title,id:"name",type:"text",placeholder:"Search Suplier",onChange:Q,value:t,onKeyDown:V}),c.a.createElement(n["a"],{className:d.a.button_title,type:"primary",onClick:J},"Cari")),c.a.createElement(v,{data:C,status:Number(w),loading:Boolean(k),error:Boolean(T),handleVisibleUpdate:R}),m?c.a.createElement(M,{visible:m,id_order:g,isConfirm:y,onConfirmOrder:U,onCancelOrder:A,onCancel:Y,onLoadButton:Boolean(I)}):null)};a["default"]=J},IZNH:function(e,a,t){e.exports={title:"antd-pro-pages-finance-suplier-index-title",title_add:"antd-pro-pages-finance-suplier-index-title_add",row_box:"antd-pro-pages-finance-suplier-index-row_box",modal_body:"antd-pro-pages-finance-suplier-index-modal_body",col:"antd-pro-pages-finance-suplier-index-col",box3:"antd-pro-pages-finance-suplier-index-box3",box5:"antd-pro-pages-finance-suplier-index-box5",box10:"antd-pro-pages-finance-suplier-index-box10",group:"antd-pro-pages-finance-suplier-index-group",label:"antd-pro-pages-finance-suplier-index-label",input:"antd-pro-pages-finance-suplier-index-input",input_title:"antd-pro-pages-finance-suplier-index-input_title",button:"antd-pro-pages-finance-suplier-index-button",button_title:"antd-pro-pages-finance-suplier-index-button_title",area:"antd-pro-pages-finance-suplier-index-area",p:"antd-pro-pages-finance-suplier-index-p",span:"antd-pro-pages-finance-suplier-index-span",number:"antd-pro-pages-finance-suplier-index-number"}}}]);