(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"BVh/":function(e,a,t){e.exports={title:"antd-pro-pages-inventory-barang-stok-index-title",title_add:"antd-pro-pages-inventory-barang-stok-index-title_add",row:"antd-pro-pages-inventory-barang-stok-index-row",row_box:"antd-pro-pages-inventory-barang-stok-index-row_box",modal_body:"antd-pro-pages-inventory-barang-stok-index-modal_body",col:"antd-pro-pages-inventory-barang-stok-index-col",box3:"antd-pro-pages-inventory-barang-stok-index-box3",box5:"antd-pro-pages-inventory-barang-stok-index-box5",box6:"antd-pro-pages-inventory-barang-stok-index-box6",box10:"antd-pro-pages-inventory-barang-stok-index-box10",group:"antd-pro-pages-inventory-barang-stok-index-group",label:"antd-pro-pages-inventory-barang-stok-index-label",input:"antd-pro-pages-inventory-barang-stok-index-input",input_title:"antd-pro-pages-inventory-barang-stok-index-input_title",button:"antd-pro-pages-inventory-barang-stok-index-button",button_action:"antd-pro-pages-inventory-barang-stok-index-button_action",button_title:"antd-pro-pages-inventory-barang-stok-index-button_title",button_save:"antd-pro-pages-inventory-barang-stok-index-button_save",area:"antd-pro-pages-inventory-barang-stok-index-area",span:"antd-pro-pages-inventory-barang-stok-index-span",p:"antd-pro-pages-inventory-barang-stok-index-p",table:"antd-pro-pages-inventory-barang-stok-index-table"}},nz5K:function(e,a,t){"use strict";t.r(a);t("14J3");var n=t("BMrR"),r=(t("+L6B"),t("2/Rp")),l=(t("5NDa"),t("5rEg")),c=t("o0o1"),o=t.n(c),i=t("HaE+"),s=t("ODXe"),d=t("q1tI"),u=t.n(d),m=t("BVh/"),b=t.n(m),p=t("p46w"),g=t.n(p),y=(t("g9YV"),t("wCAj")),v=t("VTBJ"),E=t("sWYD"),x=t("F6Wq"),f=t("G/yU"),j=function(e){var a=e.data,t=e.loading,n=e.status,l=e.error,c=e.handleVisible,o=e.handleVisibleEdit,i=Object(x["a"])(),m=Object(s["a"])(i,1),p=m[0],g=Object(d["useMemo"])((function(){return[{align:"center",title:"No",dataIndex:"id"},Object(v["a"])({align:"center",title:"SKU",dataIndex:"sku"},p("sku")),Object(v["a"])({align:"center",title:"Nama Barang",dataIndex:"nama_barang"},p("nama_barang")),Object(v["a"])({align:"center",title:"Qty Display",dataIndex:"qty_display"},p("qty_display")),{align:"center",title:"Satuan Qty Display",dataIndex:"satuan_display"},Object(v["a"])({align:"center",title:"Qty Gudang",dataIndex:"qty_gudang"},p("qty_gudang")),{align:"center",title:"Satuan Qty Gudang",dataIndex:"satuan_gudang"},Object(v["a"])({align:"center",title:"Stok Minimal",dataIndex:"stok_minimum"},p("stok_minimum")),Object(v["a"])({align:"center",title:"Expired Date",dataIndex:"expired_date",render:function(e){return u.a.createElement("span",null,e?Object(E["a"])(new Date(e),"dd/MM/yyyy"):null)}},p("expired_date")),Object(v["a"])({align:"center",title:"Status",dataIndex:"expired_status"},p("expired_status")),{align:"center",title:"Foto Produk",render:function(e){var a=e.id;return u.a.createElement(r["a"],{onClick:function(){return c(a)},className:b.a.button,type:"primary"},"Lihat")}},{align:"center",render:function(e){var a=e.id;return u.a.createElement(r["a"],{onClick:function(){return o(a)},className:b.a.button,type:"primary"},"Edit")}}]}),[]);return l||200!==n?u.a.createElement(f["a"],null):u.a.createElement("div",{style:{overflow:"auto"}},u.a.createElement(y["a"],{columns:g,loading:t,dataSource:a.reverse()}),";")},_=j,O=(t("2qtc"),t("kLXV")),k=t("Pt6z"),N=t("bIAK"),h=function(e){var a=e.id_produk,t=e.visible,r=e.onCancel,l=Object(k["a"])(),c=Object(s["a"])(l,5),o=c[0],i=c[1],m=c[2],p=c[3],g=c[4];return Object(d["useEffect"])((function(){var e=setTimeout((function(){g("".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/").concat(a,"/select"))}),0);return function(){return clearTimeout(e)}}),[a]),u.a.createElement(O["a"],{visible:t,title:"Foto Produk",width:600,onCancel:r,closable:!1,footer:null},200!==i||p?u.a.createElement(f["a"],null):null,m?u.a.createElement(N["a"],null):u.a.createElement("div",{className:b.a.modal_body},u.a.createElement(n["a"],null,u.a.createElement("div",{className:b.a.box10},u.a.createElement("img",{alt:o.nama_barang,src:o.file_img,style:{width:"100%",height:"100%"}})))))},C=h,S=(t("jCWc"),t("kPKH")),w=t("xvlK"),q=t("tUHX"),B=function(e){var a=e.visible,t=e.onCancel,c=e.onCreate,o=(e.onError,e.onLoading),i=e.id,m=Object(k["a"])(),p=Object(s["a"])(m,5),g=p[0],y=p[1],v=p[2],E=p[3],x=p[4],j=Object(d["useState"])(""),_=Object(s["a"])(j,2),h=_[0],C=_[1],B=Object(d["useState"])(""),I=Object(s["a"])(B,2),D=I[0],Q=I[1],J=Object(d["useState"])(""),V=Object(s["a"])(J,2),F=V[0],L=V[1],T=Object(d["useState"])(""),U=Object(s["a"])(T,2),G=U[0],K=U[1],H=Object(d["useState"])(""),M=Object(s["a"])(H,2),P=M[0],R=M[1];Object(d["useEffect"])((function(){var e=setTimeout((function(){x("".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/").concat(i,"/select"))}),0);return function(){return clearTimeout(e)}}),[i]);var z=function(e){var a=e.target.value;C(a)};Object(d["useEffect"])((function(){L(g.harga_jual)}),[g.harga_jual]);var A=function(e){var a=e.target.value;L(a)},W=function(e){var a=e.target.value;Q(a)},X=function(){t(),C(""),Q(""),K(""),R(""),L("")},Y=function(){c("add"===P?{url:"".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/").concat(i,"/qty-gudang?condition=add"),json:JSON.stringify({qty_gudang:D}),clear:X}:{url:"".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/").concat(i,"/qty-gudang?condition=subtract"),json:JSON.stringify({qty_gudang:D}),clear:X})},Z=function(){c({url:"".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/").concat(i,"/update"),json:JSON.stringify({harga_jual:F}),clear:X})},$=function(){c("add"===G?{url:"".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/").concat(i,"/qty-display?condition=add"),json:JSON.stringify({qty_display:h}),clear:X}:{url:"".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/").concat(i,"/qty-display?condition=subtract"),json:JSON.stringify({qty_display:h}),clear:X})};return u.a.createElement(O["a"],{visible:a,title:"Update Qty",width:1e3,closable:!1,footer:null},200!==y||E?u.a.createElement(f["a"],null):null,v?u.a.createElement(N["a"],null):u.a.createElement("div",{className:b.a.modal_body},u.a.createElement(S["a"],null,u.a.createElement(n["a"],null,u.a.createElement("div",{className:b.a.box3},u.a.createElement("div",{className:b.a.group},u.a.createElement("label",{className:b.a.label},"Qty Gudang"),u.a.createElement(l["a"],{className:b.a.input,type:"text",value:g.qty_gudang,disabled:!0}))),u.a.createElement("div",{className:b.a.box3},u.a.createElement("div",{className:b.a.group},u.a.createElement("label",{className:b.a.label,htmlFor:"qty_gudang"},"Qty Gudang Input"),u.a.createElement(l["a"],{className:b.a.input,type:"text",id:"qty_gudang",value:D,onChange:W,placeholder:"Isi Qty Gudang"}))),u.a.createElement("div",{className:b.a.box3},u.a.createElement("div",{className:b.a.group},u.a.createElement("label",{className:b.a.label,htmlFor:"simpan_gudang"},"Update Qty Gudang"),u.a.createElement("div",{className:b.a.box10},P?u.a.createElement(r["a"],{id:"simpan_gudang",disabled:Boolean(v)||o||!D,onClick:Y,type:"primary"},"Simpan"):u.a.createElement(n["a"],null,u.a.createElement(r["a"],{className:b.a.button_action,type:"primary",onClick:function(){return R("add")}},u.a.createElement(w["a"],null)),u.a.createElement(r["a"],{className:b.a.button_action,type:"primary",danger:!0,onClick:function(){return R("subtract")}},u.a.createElement(q["a"],null))))))),u.a.createElement(n["a"],null,u.a.createElement("div",{className:b.a.box3},u.a.createElement("div",{className:b.a.group},u.a.createElement("label",{className:b.a.label},"Qty Display"),u.a.createElement(l["a"],{className:b.a.input,type:"text",value:g.qty_display,disabled:!0}))),u.a.createElement("div",{className:b.a.box3},u.a.createElement("div",{className:b.a.group},u.a.createElement("label",{className:b.a.label,htmlFor:"qty_display"},"Qty Display Input"),u.a.createElement(l["a"],{className:b.a.input,type:"text",id:"qty_display",value:h,onChange:z,placeholder:"Isi Qty Display"}))),u.a.createElement("div",{className:b.a.box3},u.a.createElement("div",{className:b.a.group},u.a.createElement("label",{className:b.a.label,htmlFor:"simpan_display"},"Update Qty Display"),u.a.createElement("div",{className:b.a.box10},G?u.a.createElement(r["a"],{id:"simpan_display",disabled:Boolean(v)||o||!h,onClick:$,type:"primary"},"Simpan"):u.a.createElement(n["a"],null,u.a.createElement(r["a"],{className:b.a.button_action,type:"primary",onClick:function(){return K("add")}},u.a.createElement(w["a"],null)),u.a.createElement(r["a"],{className:b.a.button_action,type:"primary",danger:!0,onClick:function(){return K("subtract")}},u.a.createElement(q["a"],null))))))),u.a.createElement(n["a"],null,u.a.createElement("div",{className:b.a.box3},u.a.createElement("div",{className:b.a.group},u.a.createElement("label",{className:b.a.label,htmlFor:"qty_gudang"},"Harga Jual"),u.a.createElement(l["a"],{className:b.a.input,type:"text",id:"harga_jual",value:F,onChange:A,placeholder:"Harga Jual"}),u.a.createElement(r["a"],{id:"simpan_gudang",disabled:Boolean(v)||o,onClick:Z,type:"primary"},"Simpan")))))),u.a.createElement(n["a"],{justify:"end"},u.a.createElement(r["a"],{className:b.a.button,disabled:Boolean(v)||o,onClick:X,type:"primary",danger:!0},"Batal")))},I=B,D=t("jC83"),Q=t("h/CO"),J=function(){var e=Object(d["useState"])(""),a=Object(s["a"])(e,2),t=a[0],c=a[1],m=Object(d["useState"])(0),p=Object(s["a"])(m,2),y=p[0],v=p[1],E=Object(d["useState"])(!1),x=Object(s["a"])(E,2),f=x[0],j=x[1],O=Object(d["useState"])(0),N=Object(s["a"])(O,2),h=N[0],S=N[1],w=Object(d["useState"])(!1),q=Object(s["a"])(w,2),B=q[0],J=q[1],V=Object(d["useState"])(["",""]),F=Object(s["a"])(V,2),L=F[0],T=F[1],U=Object(d["useState"])(!1),G=Object(s["a"])(U,2),K=G[0],H=G[1],M=Object(k["a"])(),P=Object(s["a"])(M,5),R=P[0],z=P[1],A=P[2],W=P[3],X=P[4],Y=Object(D["a"])(),Z=Object(s["a"])(Y,3),$=Z[0],ee=Z[1],ae=Z[2];Object(d["useEffect"])((function(){var e=setTimeout((function(){X("".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/list"))}),0);return function(){return clearTimeout(e)}}),[ee]);var te=Object(d["useCallback"])((function(){X("".concat("http://127.0.0.1:8000","/admin/v1/inventory/barang/list?filter=").concat(t)),c("")}),[X,t]),ne=function(e){"enter"===e.key.toLowerCase()&&te()},re=function(e,a){T([a[0]||"",a[1]||""])},le=function(e){v(Number(e)),j(!f)},ce=function(e){S(Number(e)),J(!B)},oe=function(e){c(e.target.value)},ie=function(){v(0),j(!1)},se=function(){S(0),J(!1)},de=function(e){var a=e.url,t=e.json,n=e.clear;ae(a,t,n)},ue=function(){var e=Object(i["a"])(o.a.mark((function e(){var a,t,n,r;return o.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return H(!0),e.prev=1,e.next=4,fetch("".concat("http://127.0.0.1:8000","/admin/v1/inventory/stock-opname?start_date=").concat(L[0],"&end_date=").concat(L[1]),{headers:{"Content-Type":"application/json",Authorization:String(g.a.get("token"))}});case 4:return a=e.sent,e.next=7,a.blob();case 7:t=e.sent,n=t,r=document.createElement("a"),r.href=window.URL.createObjectURL(n),r.download="Stock Opname ".concat(L[0],"-").concat(L[1],".xlsx"),document.body.appendChild(r),r.click(),document.body.removeChild(r),T(["",""]),H(!1),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](1),H(!1);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement("div",null,u.a.createElement("p",{className:b.a.title},"Stok Barang"),u.a.createElement("div",{className:b.a.row_box},u.a.createElement(l["a"],{className:b.a.input_title,id:"name",type:"text",placeholder:"Search Barang",onChange:oe,value:t,onKeyDown:ne}),u.a.createElement(r["a"],{className:b.a.button_title,type:"primary",onClick:te},"Cari")),u.a.createElement(n["a"],{style:{marginBottom:"2em"}},u.a.createElement(Q["a"],{handleChange:re}),u.a.createElement(r["a"],{type:"primary",className:b.a.button_convert,onClick:ue,disabled:!Boolean(L[0])&&!Boolean(L[1])},K&&"Downloading excel...",!K&&"Convert to Excel")),u.a.createElement(n["a"],{justify:"space-between"},u.a.createElement("p",{className:b.a.title},"Expired Date")),u.a.createElement(_,{data:R,loading:Boolean(A),status:Number(z),error:W,handleVisible:le,handleVisibleEdit:ce}),B?u.a.createElement(I,{visible:B,id:h,onCancel:se,onCreate:de,onLoading:Boolean($),onError:ee}):null,f?u.a.createElement(C,{visible:f,id_produk:String(y),onCancel:ie}):null)};a["default"]=J}}]);