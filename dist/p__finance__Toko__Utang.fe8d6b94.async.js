(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{CLrA:function(a,e,t){a.exports={title:"antd-pro-pages-finance-toko-utang-index-title",title_add:"antd-pro-pages-finance-toko-utang-index-title_add",row_box:"antd-pro-pages-finance-toko-utang-index-row_box",modal_body:"antd-pro-pages-finance-toko-utang-index-modal_body",col:"antd-pro-pages-finance-toko-utang-index-col",box3:"antd-pro-pages-finance-toko-utang-index-box3",box5:"antd-pro-pages-finance-toko-utang-index-box5",box10:"antd-pro-pages-finance-toko-utang-index-box10",group:"antd-pro-pages-finance-toko-utang-index-group",label:"antd-pro-pages-finance-toko-utang-index-label",input:"antd-pro-pages-finance-toko-utang-index-input",input_title:"antd-pro-pages-finance-toko-utang-index-input_title",button:"antd-pro-pages-finance-toko-utang-index-button",button_convert:"antd-pro-pages-finance-toko-utang-index-button_convert",button_title:"antd-pro-pages-finance-toko-utang-index-button_title",area:"antd-pro-pages-finance-toko-utang-index-area",p:"antd-pro-pages-finance-toko-utang-index-p"}},HcpS:function(a,e,t){"use strict";t.r(e);t("14J3");var n=t("BMrR"),l=(t("+L6B"),t("2/Rp")),c=(t("5NDa"),t("5rEg")),r=t("o0o1"),o=t.n(r),i=t("HaE+"),s=t("ODXe"),u=t("q1tI"),m=t.n(u),d=t("p46w"),b=t.n(d),p=t("CLrA"),g=t.n(p),f=(t("g9YV"),t("wCAj")),E=t("VTBJ"),v=t("F6Wq"),h=t("G/yU"),j=function(a){var e=a.data,t=a.handleVisibleUpdate,c=a.handleVisibleEdit,r=a.cancel,o=a.loading,i=a.status,d=a.error,b=Object(v["a"])(),p=Object(s["a"])(b,1),j=p[0],x=Object(u["useMemo"])((function(){return[Object(E["a"])({align:"center",title:"Tanggal",key:"tanggal",render:function(a){return m.a.createElement("span",null,a.tanggal)}},j("tanggal")),Object(E["a"])({align:"center",title:"Nama Sales",key:"nama_sales",dataIndex:"nama_sales"},j("nama_sales")),Object(E["a"])({align:"center",title:"Nama Barang",key:"nama_barang",dataIndex:"nama_barang"},j("nama_barang")),Object(E["a"])({align:"center",title:"Toko / Supplier",key:"suplier",dataIndex:"suplier"},j("suplier")),Object(E["a"])({align:"center",title:"Qty / Pcs",key:"qty",dataIndex:"qty"},j("qty")),Object(E["a"])({align:"center",title:"Satuan Barang",key:"satuan_barang",dataIndex:"satuan_barang"},j("satuan_barang")),Object(E["a"])({align:"center",title:"Harga / Satuan",qty:"harga",dataIndex:"harga"},j("harga")),Object(E["a"])({align:"center",title:"Total",key:"total",dataIndex:"total"},j("total")),{key:"id",align:"center",render:function(a){return m.a.createElement(m.a.Fragment,null,0===a.status?m.a.createElement(n["a"],{justify:"space-around"},m.a.createElement(l["a"],{className:g.a.button,id:a.id,onClick:function(){return t(a.id)},type:"primary"},"Selesai"),m.a.createElement(l["a"],{className:g.a.button,id:a.id,onClick:function(){return c(a.id)},type:"primary"},"Edit"),m.a.createElement(l["a"],{className:g.a.button,onClick:function(){return r(a.id)},type:"primary",danger:!0},"Batal")):null,1===a.status?m.a.createElement("p",{style:{color:"#1890ff"}},"Selesai"):null,2===a.status?m.a.createElement("p",{style:{color:"#ff4d4f"}},"Batal"):null)}}]}),[]);return d||200!==i?m.a.createElement(h["a"],null):m.a.createElement("div",{style:{overflow:"auto"}},m.a.createElement(f["a"],{columns:x,dataSource:e.reverse(),loading:o}),";")},x=j,y=(t("2qtc"),t("kLXV")),O=(t("jCWc"),t("kPKH")),N=t("sWYD"),k=t("LuAL"),_=t("MRut"),S=t("P5uD"),C=t("ZS4f"),T=t("CzAe"),w=t("R277"),B=function(a){var e=a.visible,t=a.onError,r=a.onCancel,o=a.onCreate,i=a.onLoadButton,d=Object(u["useState"])(""),b=Object(s["a"])(d,2),p=b[0],f=b[1],E=Object(u["useState"])(!1),v=Object(s["a"])(E,2),h=v[0],j=v[1],x=Object(w["a"])(""),B=Object(s["a"])(x,3),q=B[0],F=B[1],I=B[2],U=Object(w["a"])(""),A=Object(s["a"])(U,3),L=A[0],H=A[1],M=A[2],D=Object(T["a"])(),V=Object(T["a"])(),J=Object(C["a"])("0"),R=Object(s["a"])(J,3),K=R[0],P=R[1],Q=R[2],W=JSON.stringify({nama_sales:p,qty:q,harga:L,nama_barang:V.text,id_suplier:D.id,id_satuan_barang:K});Object(u["useEffect"])((function(){return L&&p&&V.text&&q&&K&&D.text?j(!1):j(!0)}),[L,K,D.text,V.text,p,q]),Object(u["useEffect"])((function(){Q()}),[V.text]);var z=function(a){var e=a.target.value;f(e)},Y=function(){f(""),M(),I(),V.clearText(),Q(),r()},X=function(){o({url:"".concat("https://api.posarmed.id","/admin/v1/finance/utang"),json:W,clear:Y})};return m.a.createElement(y["a"],{visible:e,title:"Tambah Daftar Utang",width:1e3,closable:!1,footer:null},m.a.createElement("div",{className:g.a.modal_body},m.a.createElement(O["a"],null,m.a.createElement(n["a"],null,m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"tanggal"},"Tanggal"),m.a.createElement(c["a"],{className:g.a.input,type:"text",id:"tanggal",value:Object(N["a"])(new Date,"dd/MM/yyyy"),disabled:!0}))),m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"nama_sales"},"Nama Sales"),m.a.createElement(c["a"],{className:g.a.input,type:"text",id:"nama_sales",placeholder:"Isi Nama Sales",value:p,onChange:z}))),m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"nama_barang"},"Nama Barang"),m.a.createElement(S["a"],{id:"barang",value:V.text,onChange:V.changeText,onSelect:V.selectText})))),m.a.createElement(n["a"],null,m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"toko"},"Toko / Suplier"),m.a.createElement(_["a"],{id:"toko",value:D.text,onChange:D.changeText,onSelect:D.selectText}))),m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"qty"},"Qty"),m.a.createElement(c["a"],{className:g.a.input,id:"qty",placeholder:"Isi Qty",value:q,onChange:F}))),V.text?m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"qty_satuan"},"Satuan"),m.a.createElement(k["a"],{address:"".concat("https://api.posarmed.id","/admin/v1/master/barang/selectgroup?nama_barang=").concat(V.text),select_id:"qty_satuan",handleChange:P}))):null),m.a.createElement(n["a"],null,m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"harga"},"Harga Satuan"),m.a.createElement(c["a"],{className:g.a.input,id:"harga",placeholder:"Isi Harga",value:L,onChange:H})))))),m.a.createElement(n["a"],{justify:"end"},t?m.a.createElement("p",{style:{color:"red"}},t):null,m.a.createElement(l["a"],{className:g.a.button,disabled:i,onClick:Y,type:"primary",danger:!0},"Batal"),m.a.createElement(l["a"],{className:g.a.button,onClick:X,disabled:h||i,type:"primary"},"Simpan")))},q=B,F=t("Pt6z");function I(a){var e=Object(u["useState"])(0),t=Object(s["a"])(e,2),n=t[0],l=t[1];Object(u["useEffect"])((function(){var e=setTimeout((function(){l(a)}),0);return function(){return clearTimeout(e)}}),[a]);var c=function(a,e){l(e.key)},r=function(a){l(a)};return[n,c,r]}var U=I;function A(a){var e=a.idSelect,t=a.textSelect,n=Object(u["useState"])(""),l=Object(s["a"])(n,2),c=l[0],r=l[1],o=Object(u["useState"])(""),i=Object(s["a"])(o,2),m=i[0],d=i[1],b=Object(u["useState"])(0),p=Object(s["a"])(b,2),g=p[0],f=p[1];Object(u["useEffect"])((function(){var a=setTimeout((function(){r(t),f(e)}),0);return function(){return clearTimeout(a)}}),[e,t]);var E=function(a){r(a)},v=function(a,e){r(e.children),f(a),d(e.children)},h=function(){r(""),d(""),f(0)};return{text:c,id:g,values:m,changeText:E,selectText:v,clearText:h}}var L=A,H=(t("T2oS"),t("W9HT")),M=(t("OaEy"),t("2fM7")),D=M["a"].Option,V=function(a){var e=a.address,t=a.initial,n=a.handleChange,l=a.disabled,c=Object(u["useState"])([]),r=Object(s["a"])(c,2),d=r[0],p=r[1],g=Object(u["useState"])(!1),f=Object(s["a"])(g,2),E=f[0],v=f[1];Object(u["useEffect"])((function(){var a=setTimeout((function(){h(e)}),0);return function(){return clearTimeout(a)}}),[e]);var h=function(){var a=Object(i["a"])(o.a.mark((function a(e){var t,n,l;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return v(!0),a.prev=1,a.next=4,fetch(e,{headers:{Authorization:b.a.get("token")}});case 4:return t=a.sent,a.next=7,t.json();case 7:return n=a.sent,a.next=10,n.data;case 10:l=a.sent,v(!1),p(l),a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](1),console.log(a.t0.message,"error"),v(!1);case 19:case"end":return a.stop()}}),a,null,[[1,15]])})));return function(e){return a.apply(this,arguments)}}();return E?m.a.createElement("div",null,m.a.createElement(H["a"],null)):m.a.createElement(M["a"],{labelInValue:!0,defaultValue:{key:t||"Mohon Pilih"},style:{width:"100%",minHeight:"2em"},onChange:n,disabled:l},d&&d.map((function(a,e){return m.a.createElement(D,{key:a.nama_barang,id:a.id,value:a.nama_barang},a.nama_barang)})))},J=V,R=t("bIAK"),K=function(a){var e=a.visible,t=a.onCancel,r=a.onCreate,o=a.id_edit,i=Object(F["a"])(),d=Object(s["a"])(i,5),b=d[0],p=d[1],f=d[2],E=d[3],v=d[4],j=Object(u["useState"])(""),x=Object(s["a"])(j,2),N=x[0],S=x[1],C=Object(u["useState"])(""),T=Object(s["a"])(C,2),B=T[0],q=T[1],I=Object(u["useState"])(!1),A=Object(s["a"])(I,2),H=A[0],M=A[1],D=U(b.nama_barang),V=Object(s["a"])(D,3),K=V[0],P=V[1],Q=V[2],W=U(b.id_satuan_barang),z=Object(s["a"])(W,3),Y=z[0],X=z[1],G=z[2],Z=Object(w["a"])(b.qty),$=Object(s["a"])(Z,3),aa=$[0],ea=$[1],ta=$[2],na=Object(w["a"])(b.harga&&b.harga.split("Rp").join("").split(".").join("").trim()),la=Object(s["a"])(na,3),ca=la[0],ra=la[1],oa=la[2],ia=L({idSelect:b.id_suplier,textSelect:b.nama_suplier}),sa=JSON.stringify({nama_sales:N,nama_barang:K,qty:aa,harga:ca,id_suplier:ia.id,id_satuan_barang:Y});Object(u["useEffect"])((function(){var a=setTimeout((function(){v("".concat("https://api.posarmed.id","/admin/v1/finance/utang/").concat(o,"/select"))}),0);return function(){return clearTimeout(a)}}),[o]),Object(u["useEffect"])((function(){b&&(S(b.nama_sales),q(b.tanggal))}),[b]),Object(u["useEffect"])((function(){return aa&&ca&&N&&Y&&K&&ia.text?M(!1):M(!0)}),[ca,K,ia.text,N,aa,Y]);var ua=function(a){var e=a.target.value;S(e)},ma=function(){S(""),G(0),Q(""),ta(),oa(),t()},da=function(){r({url:"".concat("https://api.posarmed.id","/admin/v1/finance/utang/").concat(o,"/update"),json:sa,clear:ma})};return m.a.createElement(y["a"],{visible:e,title:"Edit Daftar Utang",width:1e3,closable:!1,footer:null},200!==p||E?m.a.createElement(h["a"],null):null,f?m.a.createElement(R["a"],null):m.a.createElement("div",{className:g.a.modal_body},m.a.createElement(O["a"],null,m.a.createElement(n["a"],null,m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"tanggal"},"Tanggal"),m.a.createElement(c["a"],{className:g.a.input,type:"text",id:"tanggal",value:B,disabled:!0}))),m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"nama_sales"},"Nama Sales"),m.a.createElement(c["a"],{className:g.a.input,type:"text",id:"nama_sales",placeholder:"Isi Nama Sales",value:N,onChange:ua}))),m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"nama_barang"},"Nama Barang"),m.a.createElement(J,{address:"".concat("https://api.posarmed.id","/admin/v1/master/barang/listgroup"),initial:b.nama_barang,handleChange:P})))),m.a.createElement(n["a"],null,m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"toko"},"Toko / Suplier"),m.a.createElement(_["a"],{id:"toko",value:ia.text,onChange:ia.changeText,onSelect:ia.selectText}))),m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"qty"},"Qty"),m.a.createElement(c["a"],{className:g.a.input,id:"qty",placeholder:"Isi Qty",value:aa,onChange:ea}))),K?m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"qty_satuan"},"Satuan"),m.a.createElement(k["a"],{address:"".concat("https://api.posarmed.id","/admin/v1/master/barang/selectgroup?nama_barang=").concat(K),initial:b.satuan_barang,handleChange:X}))):null),m.a.createElement(n["a"],null,m.a.createElement("div",{className:g.a.box3},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"harga"},"Harga Satuan"),m.a.createElement(c["a"],{className:g.a.input,id:"harga",placeholder:"Isi Harga",value:ca,onChange:ra})))))),m.a.createElement(n["a"],{justify:"end"},m.a.createElement(l["a"],{className:g.a.button,disabled:Boolean(f),onClick:ma,type:"primary",danger:!0},"Batal"),m.a.createElement(l["a"],{className:g.a.button,disabled:H||Boolean(f),onClick:da,type:"primary"},"Simpan")))},P=K,Q=c["a"].TextArea,W=function(a){var e=a.visible,t=a.onUpdate,c=a.onCancel,r=a.id_row,o=Object(u["useState"])(""),i=Object(s["a"])(o,2),d=i[0],b=i[1],p=function(a){b(a.target.value)},f=function(){b(""),c()},E=function(){t({url:"".concat("https://api.posarmed.id","/admin/v1/finance/utang/").concat(r,"/update"),json:JSON.stringify({status:1,keterangan:d}),clear:f})};return m.a.createElement(y["a"],{visible:e,title:"Ubah Status",width:450,closable:!1,footer:null},m.a.createElement("div",{className:g.a.modal_body},m.a.createElement("p",{style:{textAlign:"center",fontWeight:"bold"}},"Apakah Anda Yakin Ingin Merubah Status Menjadi Selesai?"),m.a.createElement("div",{className:g.a.box10},m.a.createElement("div",{className:g.a.group},m.a.createElement("label",{className:g.a.label,htmlFor:"keterangan"},"Keterangan:"),m.a.createElement(Q,{className:g.a.area,id:"keterangan",value:d,onChange:p,placeholder:"Masukkan Keterangan..."}))),m.a.createElement(n["a"],{justify:"space-around"},m.a.createElement(l["a"],{className:g.a.button,type:"primary",onClick:E,disabled:!d},"Ya"),m.a.createElement(l["a"],{className:g.a.button,type:"primary",danger:!0,onClick:f},"Batal"))))},z=W,Y=t("h/CO"),X=function(){var a=Object(u["useState"])(""),e=Object(s["a"])(a,2),t=e[0],r=e[1],d=Object(u["useState"])(!1),p=Object(s["a"])(d,2),f=p[0],E=p[1],v=Object(u["useState"])(!1),h=Object(s["a"])(v,2),j=h[0],y=h[1],O=Object(u["useState"])(!1),N=Object(s["a"])(O,2),k=N[0],_=N[1],S=Object(u["useState"])(0),C=Object(s["a"])(S,2),T=C[0],w=C[1],B=Object(u["useState"])(0),I=Object(s["a"])(B,2),U=I[0],A=I[1],L=Object(u["useState"])(["",""]),H=Object(s["a"])(L,2),M=H[0],D=H[1],V=Object(u["useState"])(!1),J=Object(s["a"])(V,2),R=J[0],K=J[1],Q=Object(F["a"])(),W=Object(s["a"])(Q,6),X=W[0],G=W[1],Z=W[2],$=W[3],aa=W[4],ea=W[5];Object(u["useEffect"])((function(){var a=setTimeout((function(){aa("".concat("https://api.posarmed.id","/admin/v1/finance/utang"))}),0);return function(){return clearTimeout(a)}}),[]);var ta=Object(u["useCallback"])((function(){aa("".concat("https://api.posarmed.id","/admin/v1/finance/utang?filter=").concat(t)),r("")}),[aa,t]),na=function(a){"enter"===a.key.toLowerCase()&&ta()},la=function(a){r(a.target.value)},ca=function(a,e){D([e[0]||"",e[1]||""])},ra=function(){return E(!f)},oa=function(a){y(!j),w(Number(a))},ia=function(a){_(!k),A(Number(a))},sa=function(){_(!1),A(0)},ua=function(){y(!1),w(0)},ma=function(a){var e=a.url,t=a.json,n=a.clear;ea(e,t,n)},da=function(a){var e=a.url,t=a.json,n=a.clear;ea(e,t,n)},ba=function(a){var e=a.url,t=a.json,n=a.clear;ea(e,t,n)},pa=function(a){ea("".concat("https://api.posarmed.id","/admin/v1/finance/utang/").concat(a,"/update"),JSON.stringify({status:2}),ua)},ga=function(){var a=Object(i["a"])(o.a.mark((function a(){var e,t,n,l;return o.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return K(!0),a.prev=1,a.next=4,fetch("".concat("https://api.posarmed.id","/admin/v1/finance/utang/excel/?start_date=").concat(M[0],"&end_date=").concat(M[1]),{headers:{"Content-Type":"application/json",Authorization:String(b.a.get("token"))}});case 4:return e=a.sent,a.next=7,e.blob();case 7:t=a.sent,n=t,l=document.createElement("a"),l.href=window.URL.createObjectURL(n),l.download="Utang-Toko-".concat(M[0],".xlsx"),document.body.appendChild(l),l.click(),document.body.removeChild(l),D(["",""]),K(!1),a.next=22;break;case 19:a.prev=19,a.t0=a["catch"](1),K(!1);case 22:case"end":return a.stop()}}),a,null,[[1,19]])})));return function(){return a.apply(this,arguments)}}();return m.a.createElement("div",null,m.a.createElement("p",{className:g.a.title},"Utang Toko"),m.a.createElement("div",{className:g.a.row_box},m.a.createElement(c["a"],{className:g.a.input_title,id:"name",type:"text",placeholder:"Search Utang Toko",onChange:la,value:t,onKeyDown:na}),m.a.createElement(l["a"],{className:g.a.button_title,type:"primary",onClick:ta},"Cari")),m.a.createElement(n["a"],{justify:"space-between"},m.a.createElement("p",{className:g.a.title},"Utang Antar Toko"),m.a.createElement("p",{className:g.a.title_add,onClick:ra},"+ Tambah")),m.a.createElement(n["a"],{style:{marginBottom:"1em"}},m.a.createElement(Y["a"],{handleChange:ca}),m.a.createElement(l["a"],{type:"primary",className:g.a.button_convert,onClick:ga,disabled:!Boolean(M[0])&&!Boolean(M[1])},R&&"Downloading excel...",!R&&"Convert to Excel")),m.a.createElement(x,{data:X,loading:Boolean(Z),status:Number(G),error:$,cancel:pa,handleVisibleUpdate:oa,handleVisibleEdit:ia}),m.a.createElement(q,{visible:f,onError:$,onCancel:ra,onCreate:ma,onLoadButton:Boolean(Z)}),k?m.a.createElement(P,{visible:k,onCreate:da,onCancel:sa,id_edit:U}):null,j?m.a.createElement(z,{visible:j,onCancel:ua,onUpdate:ba,id_row:T}):null)};e["default"]=X}}]);