(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"0RIx":function(e,a,t){e.exports={title:"antd-pro-pages-inventory-order-confirm-index-title",title_add:"antd-pro-pages-inventory-order-confirm-index-title_add",row_box:"antd-pro-pages-inventory-order-confirm-index-row_box",modal_body:"antd-pro-pages-inventory-order-confirm-index-modal_body",col:"antd-pro-pages-inventory-order-confirm-index-col",box3:"antd-pro-pages-inventory-order-confirm-index-box3",box5:"antd-pro-pages-inventory-order-confirm-index-box5",box10:"antd-pro-pages-inventory-order-confirm-index-box10",group:"antd-pro-pages-inventory-order-confirm-index-group",label:"antd-pro-pages-inventory-order-confirm-index-label",input:"antd-pro-pages-inventory-order-confirm-index-input",input_search:"antd-pro-pages-inventory-order-confirm-index-input_search",button:"antd-pro-pages-inventory-order-confirm-index-button",button_search:"antd-pro-pages-inventory-order-confirm-index-button_search",area:"antd-pro-pages-inventory-order-confirm-index-area",p:"antd-pro-pages-inventory-order-confirm-index-p",span:"antd-pro-pages-inventory-order-confirm-index-span"}},Lh6X:function(e,a,t){"use strict";t.r(a);t("14J3");var n=t("BMrR"),r=(t("+L6B"),t("2/Rp")),o=(t("5NDa"),t("5rEg")),i=t("ODXe"),c=(t("miYZ"),t("tsqr")),l=t("q1tI"),d=t.n(l),s=t("0RIx"),m=t.n(s),u=(t("g9YV"),t("wCAj")),p=(t("P2fV"),t("NJEC")),b=(t("sRBo"),t("kaz8")),f=t("VTBJ"),g=t("F6Wq"),v=t("G/yU"),y=function(e){var a=e.data,t=e.status,n=e.loading,o=e.error,c=e.onPenerima,s=e.handleVisibleUpdate,y=Object(g["a"])(),O=Object(i["a"])(y,1),E=O[0],x=[];for(var j in a)x.push({id_order:j,id:a[j][0].id,nama_suplier:a[j][0].nama_suplier,tanggal:a[j][0].tanggal,total:a[j][0].total,confirm_sales:a[j][0].confirm_sales});var _=Object(l["useMemo"])((function(){return[{align:"center",title:"Id",dataIndex:"id",defaultSortOrder:"ascend",sorter:function(e,a){return e.id-a.id}},Object(f["a"])({align:"center",title:"Tanggal",dataIndex:"tanggal"},E("tanggal")),Object(f["a"])({align:"center",title:"Nama Suplier",dataIndex:"nama_suplier"},E("nama_suplier")),Object(f["a"])({align:"center",title:"Total",dataIndex:"total"},E("total")),{align:"center",title:"Detail Barang",render:function(e){var a=e.id_order,t=e.id;return d.a.createElement(r["a"],{type:"primary",className:m.a.button,onClick:function(){return s(a,t)}},"Detail")}},{align:"center",title:"Penerima",render:function(e){return d.a.createElement(p["a"],{title:"Apakah Anda Ingin Confirm?",onConfirm:function(){c(e.id)},okText:"Yes",cancelText:"No",disabled:e.confirm_sales},d.a.createElement(b["a"],{checked:e.confirm_sales,disabled:e.confirm_sales}))}}]}),[]);return o||200!==t?d.a.createElement(v["a"],null):d.a.createElement("div",{style:{overflow:"auto"}},d.a.createElement(u["a"],{columns:_,loading:n,dataSource:x}),";")},O=y,E=(t("2qtc"),t("kLXV")),x=t("Pt6z"),j=(t("iQDF"),t("+eQT")),_=t("sWYD"),h=t("LuAL"),C=t("MRut"),N=t("CzAe"),S=t("ZS4f"),w=t("R277"),B=function(e){return 0===Object.keys(e).length},k=Object(_["a"])(new Date,"yyyy-MM-dd"),T=function(e){var a=e.visible,t=e.onCreate,c=e.onCancel,s=e.onLoading,u=e.barang_confirm,p=e.id_confirm,b=Object(l["useState"])(!1),f=Object(i["a"])(b,2),g=f[0],v=f[1],y=Object(l["useState"])(k),O=Object(i["a"])(y,2),x=O[0],_=O[1],T=Object(w["a"])(""),I=Object(i["a"])(T,3),q=I[0],D=I[1],L=I[2],J=Object(w["a"])(""),R=Object(i["a"])(J,3),A=R[0],F=R[1],M=R[2],V=Object(N["a"])(),P=Object(S["a"])("0"),Q=Object(i["a"])(P,2),U=Q[0],Y=Q[1],z={};Object(l["useEffect"])((function(){return B(z)?v(!0):v(!1)}),[z]);var X=function(e,a){_(a)},K=function(){M(),L(),_(k),V.clearText(),z={},c()},W=function(){t({url:"".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(p,"/update"),json:JSON.stringify(z),clear:K})};return U&&(z["id_satuan_barang"]=U),q&&(z["total"]=q),A&&(z["qty_confirm"]=A),V.id&&(z["id_suplier"]=V.id),x&&(z["expired_date"]=x),d.a.createElement(E["a"],{visible:a,title:"Update Order",onCancel:c,width:500,footer:null},d.a.createElement("div",{className:m.a.modal_body},d.a.createElement("div",{className:m.a.box10},d.a.createElement("div",{className:m.a.group},d.a.createElement("label",{className:m.a.label,htmlFor:"qty_confirm"},"Qty"),d.a.createElement(o["a"],{className:m.a.input,id:"qty_confirm",placeholder:"0",value:A,onChange:F}))),d.a.createElement("div",{className:m.a.box10},d.a.createElement("div",{className:m.a.group},d.a.createElement("label",{className:m.a.label,htmlFor:"total"},"Harga"),d.a.createElement(o["a"],{className:m.a.input,id:"total",placeholder:"0",value:q,onChange:D}))),d.a.createElement("div",{className:m.a.box10},d.a.createElement("div",{className:m.a.group},d.a.createElement("label",{className:m.a.label,htmlFor:"satuan"},"Satuan Barang"),d.a.createElement(h["a"],{address:"".concat("https://api.posarmed.id","/admin/v1/master/barang/selectgroup?nama_barang=").concat(u),handleChange:Y}))),d.a.createElement("div",{className:m.a.box10},d.a.createElement("div",{className:m.a.group},d.a.createElement("label",{className:m.a.label,htmlFor:"id_suplier"},"Suplier"),d.a.createElement(C["a"],{id:"id_suplier",value:V.text,onChange:V.changeText,onSelect:V.selectText}))),d.a.createElement("div",{className:m.a.box10},d.a.createElement("div",{className:m.a.group},d.a.createElement("label",{className:m.a.label},"Expired"),d.a.createElement(j["a"],{style:{width:"100%"},onChange:X})))),d.a.createElement(n["a"],{justify:"space-between"},d.a.createElement(r["a"],{onClick:c,disabled:s,type:"primary",danger:!0},"Batal"),d.a.createElement(r["a"],{onClick:W,type:"primary",disabled:g||s},s&&"Updating...",!s&&"Tambah")))},I=T,q=function(e){var a=e.visible,t=e.id_barang,o=(e.id,e.onCancel),c=e.onLoadButton,s=e.onConfirmOrder,p=e.onBatalOrder,b=Object(x["a"])(),f=Object(i["a"])(b,6),g=f[0],y=f[1],O=f[2],j=f[3],_=f[4],h=f[5],C=Object(l["useState"])(!1),N=Object(i["a"])(C,2),S=N[0],w=N[1],B=Object(l["useState"])(0),k=Object(i["a"])(B,2),T=k[0],q=k[1],D=Object(l["useState"])(""),L=Object(i["a"])(D,2),J=L[0],R=L[1],A=Object(l["useState"])(0),F=Object(i["a"])(A,2),M=F[0],V=F[1];Object(l["useEffect"])((function(){var e=setTimeout((function(){_("".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(t,"/select"))}),0);return function(){return clearTimeout(e)}}),[t,M]);var P=function(e,a){q(Number(e)),R(a),w(!S)},Q=function(){w(!1),V(Date.now()),q(0),R("")},U=function(e){var a=e.url,t=e.json,n=e.clear;h(a,t,n)},Y=Object(l["useMemo"])((function(){return[{align:"center",title:"Nama Barang",dataIndex:"nama_barang"},{align:"center",title:"Qty Req",dataIndex:"qty_req"},{align:"center",title:"Qty Conf",render:function(e){return d.a.createElement("span",{className:m.a.span,onClick:function(){return P(e.id,e.nama_barang)}},e.qty_confirm)}},{align:"center",title:"Expired Date",dataIndex:"expired_date"},{align:"center",title:"Total",dataIndex:"total"}]}),[]);return d.a.createElement(E["a"],{visible:a,title:"Confirm Order",onCancel:o,footer:null,width:800},d.a.createElement("div",{className:m.a.modal_body},200!==y||j?d.a.createElement(v["a"],null):null,g?d.a.createElement(u["a"],{columns:Y,loading:Boolean(O),rowKey:"id",dataSource:g.detail}):null),d.a.createElement(n["a"],{justify:"end"},d.a.createElement(r["a"],{className:m.a.button,disabled:c,onClick:p,type:"primary",danger:!0},"Batal Order"),d.a.createElement(r["a"],{className:m.a.button,disabled:c,onClick:function(){return s(String(t))},type:"primary"},"Confirm Order")),S?d.a.createElement(I,{visible:S,id_confirm:T,barang_confirm:J,onCreate:U,onCancel:Q,onLoading:Boolean(O)}):null)},D=q;c["a"].config({top:100,duration:1,maxCount:1});var L=function(){var e=Object(l["useState"])(""),a=Object(i["a"])(e,2),t=a[0],s=a[1],u=Object(l["useState"])(0),p=Object(i["a"])(u,2),b=p[0],f=p[1],g=Object(l["useState"])(""),v=Object(i["a"])(g,2),y=v[0],E=v[1],j=Object(l["useState"])(!1),_=Object(i["a"])(j,2),h=_[0],C=_[1],N=Object(x["a"])(),S=Object(i["a"])(N,6),w=S[0],B=S[1],k=S[2],T=S[3],I=S[4],q=S[5];Object(l["useEffect"])((function(){var e=setTimeout((function(){I("".concat("https://api.posarmed.id","/admin/v1/inventory/order/list"))}),0);return function(){return clearTimeout(e)}}),[]);var L=Object(l["useCallback"])((function(){I("".concat("https://api.posarmed.id","/admin/v1/inventory/order/list?filter=").concat(t))}),[I,t]),J=function(e){"enter"===e.key.toLowerCase()&&L()},R=function(e){s(e.target.value)},A=function(e,a){f(String(e)),C(!h),E(a)},F=function(){f(0),E(0),C(!h)},M=function(e){q("".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(e,"/update"),JSON.stringify({confirm_sales:1}),P),C(!1)},V=function(){q("".concat("https://api.posarmed.id","/admin/v1/inventory/order/").concat(b,"/batal"),JSON.stringify(null),F)},P=function(){200===B?c["a"].success("Confirm Success"):c["a"].error("Confirm Batal")};return d.a.createElement("div",null,d.a.createElement("p",{className:m.a.title},"Confirm Order"),d.a.createElement("div",{className:m.a.row_box},d.a.createElement(o["a"],{className:m.a.input_search,id:"name",type:"text",placeholder:"Search Barang",onChange:R,value:t,onKeyDown:J}),d.a.createElement(r["a"],{className:m.a.button_search,type:"primary",onClick:L},"Cari")),d.a.createElement(n["a"],{justify:"end"},d.a.createElement("p",{className:m.a.title_add},"Approve")),d.a.createElement(O,{data:w,status:Number(B),loading:Boolean(k),error:T,onPenerima:M,handleVisibleUpdate:A}),h?d.a.createElement(D,{visible:h,id_barang:b,id_id:y,onLoadButton:Boolean(k),onConfirmOrder:M,onBatalOrder:V,onCancel:F}):null)};a["default"]=L}}]);